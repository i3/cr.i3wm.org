
<!DOCTYPE html>
<html>
  <head>
    <title>i3 Patch: Allow configuration of colors with alpha channel</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" media="screen" href="http://i3wm.org/css/style.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/public/stylesheets/main.css">
    <link rel="shortcut icon" type="image/png" href="http://i3wm.org/favicon.png">
    <script src="/public/js/jquery-1.9.0.min.js" type="text/javascript" charset="utf-8"></script>
	<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
    
    
      <script src="/public/js/patch.js" type="text/javascript" charset="utf-8"></script>
    
  </head>
  <body>


<div id="main">
	<a href="/"><h1 id="title">i3 - improved tiling WM</h1></a>
				<ul id="nav">
						<li><a style="border-bottom: 2px solid #fff" href="/">Reviews</a></li>
						<li><a href="http://bugs.i3wm.org/">Bugs</a></li>
				</ul>
<br style="clear: both">

<div id="content">

<h1>Allow configuration of colors with alpha channel</h1>
<div style="float: right">
<p>
Patch status: superseded
</p>
<p>
Patch by Klemens Baum
</p>
</div>

<p>
<strong>Long description</strong>:<br>
<pre>This commit comprises the following changes:

  Properly validate color strings with optional alpha channel
    For example #DDE83030 and #E83030 are both allowed
  Use a 32-bit visual for i3bar if available
    Note: We cannot just use the root visual because some graphics
    drivers (e.g. fglrx) do not support setting a 32-bit root visual.
  Pass the current visual to draw_text (needed for Pango)
</pre>
</p>


<p>
To apply this patch, use:<br>
<code>curl http://cr.i3wm.org/patch/62/raw.patch | git am</code>
</p>




<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3-config-wizard/main.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L30">30</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="30">@@ -72,6 &#43;72,7 @@ static uint32_t xcb_numlock_mask;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L31">31</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="31"> xcb_connection_t *conn;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L32">32</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="32"> static xcb_key_symbols_t *keysyms;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L33">33</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="33"> xcb_screen_t *root_screen;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L34">34</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="34">&#43;static xcb_visualtype_t* visual_type;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L35">35</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="35"> static xcb_get_modifier_mapping_reply_t *modmap_reply;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L36">36</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="36"> static i3Font font;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L37">37</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="37"> static i3Font bold_font;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L38">38</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="38">@@ -484,7 &#43;485,7 @@ static int handle_expose() {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L39">39</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="39">     set_font(&amp;font);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L40">40</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="40"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L41">41</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="41"> #define txt(x, row, text) \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L42">42</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="42">-    draw_text_ascii(text, pixmap, pixmap_gc,\</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L43">43</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="43">&#43;    draw_text_ascii(text, pixmap, visual_type, pixmap_gc,\</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L44">44</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="44">             x, (row - 1) * font.height &#43; 4, 300 - x * 2)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L45">45</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="45"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L46">46</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="46">     if (current_step == STEP_WELCOME) {</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L47">47</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="47">@@ -814,6 &#43;815,7 @@ int main(int argc, char *argv[]) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L48">48</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="48">     #undef xmacro</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L49">49</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="49"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L50">50</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="50">     root_screen = xcb_aux_get_screen(conn, screens);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L51">51</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="51">&#43;    visual_type = get_visualtype(root_screen);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L52">52</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="52">     root = root_screen-&gt;root;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L53">53</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="53"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L54">54</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="54">     if (!(modmap_reply = xcb_get_modifier_mapping_reply(conn, modmap_cookie, NULL)))</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3-input/main.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L59">59</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="59">@@ -43,6 &#43;43,7 @@ static xcb_key_symbols_t *symbols;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L60">60</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="60"> static bool modeswitch_active = false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L61">61</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="61"> static xcb_window_t win;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L62">62</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="62"> static xcb_pixmap_t pixmap;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L63">63</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="63">&#43;static xcb_visualtype_t* visual_type;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L64">64</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="64"> static xcb_gcontext_t pixmap_gc;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L65">65</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="65"> static xcb_char2b_t glyphs_ucs[512];</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L66">66</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="66"> static char *glyphs_utf8[512];</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L67">67</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="67">@@ -137,13 &#43;138,13 @@ static int handle_expose(void *data, xcb_connection_t *conn, xcb_expose_event_t</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L68">68</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="68"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L69">69</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="69">     /* draw the prompt â€¦ */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L70">70</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="70">     if (prompt != NULL) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L71">71</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="71">-        draw_text(prompt, pixmap, pixmap_gc, 4, 4, 492);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L72">72</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="72">&#43;        draw_text(prompt, pixmap, visual_type, pixmap_gc, 4, 4, 492);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L73">73</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="73">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L74">74</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="74">     /* â€¦ and the text */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L75">75</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="75">     if (input_position &gt; 0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L76">76</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="76">     {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L77">77</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="77">         i3String *input = i3string_from_ucs2(glyphs_ucs, input_position);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L78">78</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="78">-        draw_text(input, pixmap, pixmap_gc, prompt_offset &#43; 4, 4, 492);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L79">79</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="79">&#43;        draw_text(input, pixmap, visual_type, pixmap_gc, prompt_offset &#43; 4, 4, 492);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L80">80</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="80">         i3string_free(input);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L81">81</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="81">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L82">82</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="82"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L83">83</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="83">@@ -385,6 &#43;386,7 @@ int main(int argc, char *argv[]) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L84">84</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="84">     focus_cookie = xcb_get_input_focus(conn);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L85">85</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="85"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L86">86</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="86">     root_screen = xcb_aux_get_screen(conn, screens);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L87">87</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="87">&#43;    visual_type = get_visualtype(root_screen);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L88">88</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="88">     root = root_screen-&gt;root;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L89">89</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="89"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L90">90</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="90">     symbols = xcb_key_symbols_alloc(conn);</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3-nagbar/main.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L95">95</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="95">@@ -41,6 &#43;41,7 @@ typedef struct {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L96">96</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="96"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L97">97</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="97"> static xcb_window_t win;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L98">98</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="98"> static xcb_pixmap_t pixmap;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L99">99</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="99">&#43;static xcb_visualtype_t* visual_type;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L100">100</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="100"> static xcb_gcontext_t pixmap_gc;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L101">101</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="101"> static xcb_rectangle_t rect = { 0, 0, 600, 20 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L102">102</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="102"> static i3Font font;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L103">103</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="103">@@ -191,7 &#43;192,7 @@ static int handle_expose(xcb_connection_t *conn, xcb_expose_event_t *event) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L104">104</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="104"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L105">105</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="105">     /* restore font color */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L106">106</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="106">     set_font_colors(pixmap_gc, color_text, color_background);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L107">107</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="107">-    draw_text(prompt, pixmap, pixmap_gc,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L108">108</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="108">&#43;    draw_text(prompt, pixmap, visual_type, pixmap_gc,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L109">109</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="109">             4 &#43; 4, 4 &#43; 4, rect.width - 4 - 4);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L110">110</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="110"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L111">111</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="111">     /* render close button */</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L112">112</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="112">@@ -218,7 &#43;219,7 @@ static int handle_expose(xcb_connection_t *conn, xcb_expose_event_t *event) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L113">113</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="113"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L114">114</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="114">     values[0] = 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L115">115</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="115">     set_font_colors(pixmap_gc, color_text, color_button_background);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L116">116</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="116">-    draw_text_ascii(&#34;X&#34;, pixmap, pixmap_gc, y - w - line_width &#43; w / 2 - 4,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L117">117</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="117">&#43;    draw_text_ascii(&#34;X&#34;, pixmap, visual_type, pixmap_gc, y - w - line_width &#43; w / 2 - 4,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L118">118</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="118">             4 &#43; 4 - 1, rect.width - y &#43; w &#43; line_width - w / 2 &#43; 4);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L119">119</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="119">     y -= w;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L120">120</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="120"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L121">121</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="121">@@ -249,7 &#43;250,7 @@ static int handle_expose(xcb_connection_t *conn, xcb_expose_event_t *event) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L122">122</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="122">         values[0] = color_text;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L123">123</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="123">         values[1] = color_button_background;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L124">124</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="124">         set_font_colors(pixmap_gc, color_text, color_button_background);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L125">125</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="125">-        draw_text(buttons[c].label, pixmap, pixmap_gc,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L126">126</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="126">&#43;        draw_text(buttons[c].label, pixmap, visual_type, pixmap_gc,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L127">127</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="127">                 y - w - line_width &#43; 6, 4 &#43; 3, rect.width - y &#43; w &#43; line_width - 6);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L128">128</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="128"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L129">129</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="129">         y -= w;</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/src/xcb.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L134">134</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="134">@@ -48,6 &#43;48,9 @@ xcb_connection_t *xcb_connection;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L135">135</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="135"> int              screen;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L136">136</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="136"> xcb_screen_t     *root_screen;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L137">137</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="137"> xcb_window_t     xcb_root;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L138">138</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="138">&#43;xcb_visualtype_t *visual_type;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L139">139</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="139">&#43;uint8_t          depth;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L140">140</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="140">&#43;xcb_colormap_t   colormap;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L141">141</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="141"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L142">142</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="142"> /* selection window for tray support */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L143">143</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="143"> static xcb_window_t selwin = XCB_NONE;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L144">144</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="144">@@ -173,7 &#43;176,8 @@ void refresh_statusline(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L145">145</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="145"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L146">146</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="146">         uint32_t colorpixel = (block-&gt;color ? get_colorpixel(block-&gt;color) : colors.bar_fg);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L147">147</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="147">         set_font_colors(statusline_ctx, colorpixel, colors.bar_bg);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L148">148</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="148">-        draw_text(block-&gt;full_text, statusline_pm, statusline_ctx, x &#43; block-&gt;x_offset, 1, block-&gt;width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L149">149</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="149">&#43;        draw_text(block-&gt;full_text, statusline_pm, visual_type,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L150">150</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="150">&#43;                statusline_ctx, x &#43; block-&gt;x_offset, 1, block-&gt;width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L151">151</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="151">         x &#43;= block-&gt;width &#43; block-&gt;x_offset &#43; block-&gt;x_append;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L152">152</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="152"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L153">153</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="153">         if (TAILQ_NEXT(block, blocks) != NULL &amp;&amp; !block-&gt;no_separator &amp;&amp; block-&gt;sep_block_width &gt; 0) {</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L154">154</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="154">@@ -261,7 &#43;265,16 @@ void unhide_bars(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L155">155</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="155"> void init_colors(const struct xcb_color_strings_t *new_colors) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L156">156</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="156"> #define PARSE_COLOR(name, def) \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L157">157</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="157">     do { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L158">158</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="158">-        colors.name = get_colorpixel(new_colors-&gt;name ? new_colors-&gt;name : def); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L159">159</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="159">&#43;        const char* color = def; \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L160">160</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="160">&#43;        const char* user_color = new_colors-&gt;name; \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L161">161</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="161">&#43;        if (user_color) { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L162">162</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="162">&#43;            if (valid_colorpixel(user_color)) { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L163">163</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="163">&#43;                color = user_color; \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L164">164</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="164">&#43;            } else { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L165">165</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="165">&#43;                ELOG(&#34;Invalid color specified for %s: %s&#34;, #name, user_color); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L166">166</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="166">&#43;            } \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L167">167</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="167">&#43;        } \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L168">168</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="168">&#43;        colors.name = get_colorpixel(color); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L169">169</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="169">     } while  (0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L170">170</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="170">     PARSE_COLOR(bar_fg, &#34;#FFFFFF&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L171">171</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="171">     PARSE_COLOR(bar_bg, &#34;#000000&#34;);</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L172">172</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="172">@@ -872,34 &#43;885,55 @@ char *init_xcb_early() {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L173">173</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="173">     root_screen = xcb_aux_get_screen(xcb_connection, screen);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L174">174</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="174">     xcb_root = root_screen-&gt;root;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L175">175</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="175"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L176">176</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="176">&#43;    depth = root_screen-&gt;root_depth;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L177">177</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="177">&#43;    colormap = root_screen-&gt;default_colormap;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L178">178</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="178">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L179">179</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="179">&#43;    visual_type = xcb_aux_find_visual_by_attrs(root_screen, -1, 32);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L180">180</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="180">&#43;    if (visual_type) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L181">181</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="181">&#43;        depth = xcb_aux_get_depth_of_visual(root_screen, visual_type-&gt;visual_id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L182">182</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="182">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L183">183</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="183">&#43;        colormap = xcb_generate_id(xcb_connection);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L184">184</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="184">&#43;        xcb_void_cookie_t cm_cookie = xcb_create_colormap_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L185">185</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="185">&#43;                                                                  XCB_COLORMAP_ALLOC_NONE,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L186">186</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="186">&#43;                                                                  colormap,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L187">187</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="187">&#43;                                                                  xcb_root,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L188">188</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="188">&#43;                                                                  visual_type-&gt;visual_id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L189">189</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="189">&#43;        if (xcb_request_failed(cm_cookie, &#34;Could not allocate colormap&#34;)) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L190">190</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="190">&#43;            exit(EXIT_FAILURE);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L191">191</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="191">&#43;        }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L192">192</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="192">&#43;    } else {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L193">193</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="193">&#43;        visual_type = get_visualtype(root_screen);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L194">194</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="194">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L195">195</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="195">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L196">196</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="196">     /* We draw the statusline to a seperate pixmap, because it looks the same on all bars and</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L197">197</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="197">      * this way, we can choose to crop it */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L198">198</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="198">     uint32_t mask = XCB_GC_FOREGROUND;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L199">199</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="199">     uint32_t vals[] = { colors.bar_bg, colors.bar_bg };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L200">200</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="200"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L201">201</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="201">&#43;    statusline_pm = xcb_generate_id(xcb_connection);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L202">202</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="202">&#43;    xcb_void_cookie_t sl_pm_cookie = xcb_create_pixmap_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L203">203</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="203">&#43;                                                               depth,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L204">204</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="204">&#43;                                                               statusline_pm,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L205">205</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="205">&#43;                                                               xcb_root,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L206">206</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="206">&#43;                                                               root_screen-&gt;width_in_pixels,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L207">207</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="207">&#43;                                                               root_screen-&gt;height_in_pixels);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L208">208</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="208">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L209">209</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="209">     statusline_clear = xcb_generate_id(xcb_connection);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L210">210</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="210">     xcb_void_cookie_t clear_ctx_cookie = xcb_create_gc_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L211">211</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="211">                                                                statusline_clear,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L212">212</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="212">-                                                               xcb_root,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L213">213</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="213">&#43;                                                               statusline_pm,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L214">214</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="214">                                                                mask,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L215">215</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="215">                                                                vals);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L216">216</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="216"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L217">217</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="217">&#43;    mask |= XCB_GC_BACKGROUND;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L218">218</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="218">&#43;    vals[0] = colors.bar_fg;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L219">219</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="219">     statusline_ctx = xcb_generate_id(xcb_connection);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L220">220</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="220">     xcb_void_cookie_t sl_ctx_cookie = xcb_create_gc_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L221">221</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="221">                                                             statusline_ctx,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L222">222</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="222">-                                                            xcb_root,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L223">223</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="223">&#43;                                                            statusline_pm,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L224">224</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="224">                                                             0,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L225">225</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="225">                                                             NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L226">226</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="226"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L227">227</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="227">-    statusline_pm = xcb_generate_id(xcb_connection);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L228">228</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="228">-    xcb_void_cookie_t sl_pm_cookie = xcb_create_pixmap_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L229">229</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="229">-                                                               root_screen-&gt;root_depth,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L230">230</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="230">-                                                               statusline_pm,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L231">231</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="231">-                                                               xcb_root,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L232">232</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="232">-                                                               root_screen-&gt;width_in_pixels,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L233">233</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="233">-                                                               root_screen-&gt;height_in_pixels);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L234">234</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="234">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L235">235</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="235">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L236">236</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="236">     /* The various Watchers to communicate with xcb */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L237">237</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="237">     xcb_io = smalloc(sizeof(ev_io));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L238">238</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="238">     xcb_prep = smalloc(sizeof(ev_prepare));</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L239">239</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="239">@@ -1267,7 &#43;1301,7 @@ void realloc_sl_buffer(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L240">240</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="240">     xcb_free_pixmap(xcb_connection, statusline_pm);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L241">241</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="241">     statusline_pm = xcb_generate_id(xcb_connection);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L242">242</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="242">     xcb_void_cookie_t sl_pm_cookie = xcb_create_pixmap_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L243">243</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="243">-                                                               root_screen-&gt;root_depth,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L244">244</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="244">&#43;                                                               depth,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L245">245</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="245">                                                                statusline_pm,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L246">246</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="246">                                                                xcb_root,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L247">247</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="247">                                                                MAX(root_screen-&gt;width_in_pixels, statusline_width),</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L248">248</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="248">@@ -1279,7 &#43;1313,7 @@ void realloc_sl_buffer(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L249">249</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="249">     statusline_clear = xcb_generate_id(xcb_connection);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L250">250</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="250">     xcb_void_cookie_t clear_ctx_cookie = xcb_create_gc_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L251">251</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="251">                                                                statusline_clear,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L252">252</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="252">-                                                               xcb_root,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L253">253</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="253">&#43;                                                               statusline_pm,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L254">254</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="254">                                                                mask,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L255">255</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="255">                                                                vals);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L256">256</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="256"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L257">257</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="257">@@ -1289,7 &#43;1323,7 @@ void realloc_sl_buffer(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L258">258</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="258">     xcb_free_gc(xcb_connection, statusline_ctx);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L259">259</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="259">     xcb_void_cookie_t sl_ctx_cookie = xcb_create_gc_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L260">260</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="260">                                                             statusline_ctx,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L261">261</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="261">-                                                            xcb_root,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L262">262</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="262">&#43;                                                            statusline_pm,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L263">263</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="263">                                                             mask,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L264">264</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="264">                                                             vals);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L265">265</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="265"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L266">266</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="266">@@ -1324,37 &#43;1358,42 @@ void reconfig_windows(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L267">267</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="267"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L268">268</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="268">             walk-&gt;bar = xcb_generate_id(xcb_connection);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L269">269</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="269">             walk-&gt;buffer = xcb_generate_id(xcb_connection);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L270">270</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="270">-            mask = XCB_CW_BACK_PIXEL | XCB_CW_OVERRIDE_REDIRECT | XCB_CW_EVENT_MASK;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L271">271</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="271">&#43;            mask = XCB_CW_BACK_PIXEL | XCB_CW_BORDER_PIXEL | XCB_CW_OVERRIDE_REDIRECT</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L272">272</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="272">&#43;                | XCB_CW_EVENT_MASK | XCB_CW_COLORMAP;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L273">273</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="273">             /* Black background */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L274">274</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="274">             values[0] = colors.bar_bg;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L275">275</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="275">&#43;            /* Border */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L276">276</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="276">&#43;            values[1] = root_screen-&gt;black_pixel;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L277">277</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="277">             /* If hide_on_modifier is set, i3 is not supposed to manage our bar-windows */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L278">278</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="278">-            values[1] = config.hide_on_modifier;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L279">279</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="279">&#43;            values[2] = config.hide_on_modifier;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L280">280</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="280">             /* We enable the following EventMask fields:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L281">281</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="281">              * EXPOSURE, to get expose events (we have to re-draw then)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L282">282</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="282">              * SUBSTRUCTURE_REDIRECT, to get ConfigureRequests when the tray</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L283">283</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="283">              *                        child windows use ConfigureWindow</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L284">284</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="284">              * BUTTON_PRESS, to handle clicks on the workspace buttons</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L285">285</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="285">              * */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L286">286</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="286">-            values[2] = XCB_EVENT_MASK_EXPOSURE |</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L287">287</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="287">&#43;            values[3] = XCB_EVENT_MASK_EXPOSURE |</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L288">288</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="288">                         XCB_EVENT_MASK_SUBSTRUCTURE_REDIRECT;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L289">289</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="289">             if (!config.disable_ws) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L290">290</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="290">-                values[2] |= XCB_EVENT_MASK_BUTTON_PRESS;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L291">291</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="291">&#43;                values[3] |= XCB_EVENT_MASK_BUTTON_PRESS;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L292">292</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="292">             }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L293">293</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="293">&#43;            /* Colormap */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L294">294</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="294">&#43;            values[4] = colormap;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L295">295</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="295">             xcb_void_cookie_t win_cookie = xcb_create_window_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L296">296</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="296">-                                                                     root_screen-&gt;root_depth,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L297">297</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="297">&#43;                                                                     depth,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L298">298</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="298">                                                                      walk-&gt;bar,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L299">299</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="299">                                                                      xcb_root,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L300">300</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="300">                                                                      walk-&gt;rect.x, walk-&gt;rect.y &#43; walk-&gt;rect.h - font.height - 6,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L301">301</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="301">                                                                      walk-&gt;rect.w, font.height &#43; 6,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L302">302</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="302">                                                                      0,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L303">303</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="303">                                                                      XCB_WINDOW_CLASS_INPUT_OUTPUT,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L304">304</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="304">-                                                                     root_screen-&gt;root_visual,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L305">305</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="305">&#43;                                                                     visual_type-&gt;visual_id,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L306">306</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="306">                                                                      mask,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L307">307</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="307">                                                                      values);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L308">308</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="308"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L309">309</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="309">             /* The double-buffer we use to render stuff off-screen */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L310">310</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="310">             xcb_void_cookie_t pm_cookie = xcb_create_pixmap_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L311">311</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="311">-                                                                    root_screen-&gt;root_depth,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L312">312</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="312">&#43;                                                                    depth,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L313">313</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="313">                                                                     walk-&gt;buffer,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L314">314</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="314">                                                                     walk-&gt;bar,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L315">315</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="315">                                                                     walk-&gt;rect.w,</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L316">316</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="316">@@ -1494,7 &#43;1533,7 @@ void reconfig_windows(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L317">317</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="317"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L318">318</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="318">             DLOG(&#34;Recreating buffer for output %s\n&#34;, walk-&gt;name);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L319">319</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="319">             xcb_void_cookie_t pm_cookie = xcb_create_pixmap_checked(xcb_connection,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L320">320</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="320">-                                                                    root_screen-&gt;root_depth,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L321">321</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="321">&#43;                                                                    depth,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L322">322</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="322">                                                                     walk-&gt;buffer,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L323">323</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="323">                                                                     walk-&gt;bar,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L324">324</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="324">                                                                     walk-&gt;rect.w,</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L325">325</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="325">@@ -1633,7 &#43;1672,7 @@ void draw_bars(bool unhide) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L326">326</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="326">                                     1,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L327">327</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="327">                                     &amp;rect);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L328">328</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="328">             set_font_colors(outputs_walk-&gt;bargc, fg_color, bg_color);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L329">329</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="329">-            draw_text(ws_walk-&gt;name, outputs_walk-&gt;buffer, outputs_walk-&gt;bargc, i &#43; 5, 3, ws_walk-&gt;name_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L330">330</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="330">&#43;            draw_text(ws_walk-&gt;name, outputs_walk-&gt;buffer, visual_type, outputs_walk-&gt;bargc, i &#43; 5, 3, ws_walk-&gt;name_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L331">331</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="331">             i &#43;= 10 &#43; ws_walk-&gt;name_width &#43; 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L332">332</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="332"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L333">333</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="333">         }</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L334">334</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="334">@@ -1669,7 &#43;1708,7 @@ void draw_bars(bool unhide) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L335">335</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="335">                                     &amp;rect);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L336">336</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="336"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L337">337</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="337">             set_font_colors(outputs_walk-&gt;bargc, fg_color, bg_color);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L338">338</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="338">-            draw_text(binding.name, outputs_walk-&gt;buffer, outputs_walk-&gt;bargc, i &#43; 5, 3, binding.width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L339">339</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="339">&#43;            draw_text(binding.name, outputs_walk-&gt;buffer, visual_type, outputs_walk-&gt;bargc, i &#43; 5, 3, binding.width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L340">340</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="340">         }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L341">341</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="341"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L342">342</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="342">         i = 0;</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/libi3.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L347">347</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="347">@@ -231,14 &#43;231,25 @@ int ipc_recv_message(int sockfd, uint32_t *message_type,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L348">348</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="348"> void fake_configure_notify(xcb_connection_t *conn, xcb_rectangle_t r, xcb_window_t window, int border_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L349">349</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="349"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L350">350</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="350"> /**</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L351">351</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="351">&#43; * Checks whether the given string denotes a valid color.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L352">352</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="352">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L353">353</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="353">&#43; * Color strings start with # followed by two hexadecimal digits for each</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L354">354</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="354">&#43; * component.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L355">355</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="355">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L356">356</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="356">&#43; * RGB components must be specified while alpha is optional,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L357">357</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="357">&#43; * i.e. all valid colors are of the form #RRGGBB or #AARRGGBB.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L358">358</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="358">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L359">359</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="359">&#43;bool valid_colorpixel(const char* hex);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L360">360</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="360">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L361">361</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="361">&#43;/**</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L362">362</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="362">  * Returns the colorpixel to use for the given hex color (think of HTML). Only</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L363">363</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="363">  * works for true-color (vast majority of cases) at the moment, avoiding a</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L364">364</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="364">  * roundtrip to X11.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L365">365</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="365">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L366">366</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="366">- * The hex_color has to start with #, for example #FF00FF.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L367">367</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="367">&#43; * See valid_colorpixel() for a description of the color format.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L368">368</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="368">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L369">369</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="369">  * NOTE that get_colorpixel() does _NOT_ check the given color code for validity.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L370">370</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="370">- * This has to be done by the caller.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L371">371</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="371">&#43; * The caller should use valid_colorpixel() to sanitize user input.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L372">372</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="372">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L373">373</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="373">  * NOTE that this function may in the future rely on a global xcb_connection_t</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L374">374</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="374">  * variable called &#39;conn&#39; to be present.</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L375">375</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="375">@@ -328,14 &#43;339,14 @@ void set_font_colors(xcb_gcontext_t gc, uint32_t foreground, uint32_t background</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L376">376</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="376">  * Text must be specified as an i3String.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L377">377</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="377">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L378">378</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="378">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L379">379</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="379">-void draw_text(i3String *text, xcb_drawable_t drawable,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L380">380</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="380">&#43;void draw_text(i3String *text, xcb_drawable_t drawable, xcb_visualtype_t* visual,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L381">381</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="381">         xcb_gcontext_t gc, int x, int y, int max_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L382">382</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="382"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L383">383</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="383"> /**</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L384">384</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="384">  * ASCII version of draw_text to print static strings.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L385">385</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="385">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L386">386</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="386">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L387">387</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="387">-void draw_text_ascii(const char *text, xcb_drawable_t drawable,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L388">388</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="388">&#43;void draw_text_ascii(const char *text, xcb_drawable_t drawable, xcb_visualtype_t* visual,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L389">389</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="389">         xcb_gcontext_t gc, int x, int y, int max_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L390">390</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="390"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L391">391</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="391"> /**</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/libi3/font.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L396">396</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="396">@@ -79,11 &#43;79,11 @@ static bool load_pango_font(i3Font *font, const char *desc) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L397">397</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="397">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L398">398</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="398">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L399">399</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="399"> static void draw_text_pango(const char *text, size_t text_len,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L400">400</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="400">-        xcb_drawable_t drawable, int x, int y, int max_width) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L401">401</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="401">&#43;        xcb_drawable_t drawable, xcb_visualtype_t* visual, int x, int y, int max_width) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L402">402</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="402">     /* Create the Pango layout */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L403">403</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="403">     /* root_visual_type is cached in load_pango_font */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L404">404</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="404">     cairo_surface_t *surface = cairo_xcb_surface_create(conn, drawable,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L405">405</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="405">-            root_visual_type, x &#43; max_width, y &#43; savedFont-&gt;height);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L406">406</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="406">&#43;            visual, x &#43; max_width, y &#43; savedFont-&gt;height);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L407">407</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="407">     cairo_t *cr = cairo_create(surface);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L408">408</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="408">     PangoLayout *layout = pango_cairo_create_layout(cr);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L409">409</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="409">     pango_layout_set_font_description(layout, savedFont-&gt;specific.pango_desc);</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L410">410</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="410">@@ -322,7 &#43;322,7 @@ static void draw_text_xcb(const xcb_char2b_t *text, size_t text_len, xcb_drawabl</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L411">411</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="411">  * Text must be specified as an i3String.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L412">412</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="412">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L413">413</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="413">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L414">414</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="414">-void draw_text(i3String *text, xcb_drawable_t drawable,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L415">415</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="415">&#43;void draw_text(i3String *text, xcb_drawable_t drawable, xcb_visualtype_t* visual,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L416">416</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="416">                xcb_gcontext_t gc, int x, int y, int max_width) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L417">417</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="417">     assert(savedFont != NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L418">418</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="418"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L419">419</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="419">@@ -338,7 &#43;338,7 @@ void draw_text(i3String *text, xcb_drawable_t drawable,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L420">420</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="420">         case FONT_TYPE_PANGO:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L421">421</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="421">             /* Render the text using Pango */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L422">422</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="422">             draw_text_pango(i3string_as_utf8(text), i3string_get_num_bytes(text),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L423">423</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="423">-                            drawable, x, y, max_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L424">424</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="424">&#43;                            drawable, visual, x, y, max_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L425">425</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="425">             return;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L426">426</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="426"> #endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L427">427</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="427">         default:</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L428">428</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="428">@@ -350,7 &#43;350,7 @@ void draw_text(i3String *text, xcb_drawable_t drawable,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L429">429</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="429">  * ASCII version of draw_text to print static strings.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L430">430</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="430">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L431">431</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="431">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L432">432</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="432">-void draw_text_ascii(const char *text, xcb_drawable_t drawable,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L433">433</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="433">&#43;void draw_text_ascii(const char *text, xcb_drawable_t drawable, xcb_visualtype_t* visual,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L434">434</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="434">                xcb_gcontext_t gc, int x, int y, int max_width) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L435">435</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="435">     assert(savedFont != NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L436">436</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="436"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L437">437</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="437">@@ -364,7 &#43;364,7 @@ void draw_text_ascii(const char *text, xcb_drawable_t drawable,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L438">438</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="438">             if (text_len &gt; 255) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L439">439</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="439">                 /* The text is too long to draw it directly to X */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L440">440</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="440">                 i3String *str = i3string_from_utf8(text);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L441">441</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="441">-                draw_text(str, drawable, gc, x, y, max_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L442">442</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="442">&#43;                draw_text(str, drawable, visual, gc, x, y, max_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L443">443</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="443">                 i3string_free(str);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L444">444</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="444">             } else {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L445">445</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="445">                 /* X11 coordinates for fonts start at the baseline */</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L446">446</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="446">@@ -378,7 &#43;378,7 @@ void draw_text_ascii(const char *text, xcb_drawable_t drawable,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L447">447</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="447">         case FONT_TYPE_PANGO:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L448">448</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="448">             /* Render the text using Pango */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L449">449</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="449">             draw_text_pango(text, strlen(text),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L450">450</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="450">-                            drawable, x, y, max_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L451">451</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="451">&#43;                            drawable, visual, x, y, max_width);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L452">452</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="452">             return;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L453">453</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="453"> #endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L454">454</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="454">         default:</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/libi3/get_colorpixel.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L459">459</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="459">@@ -7,9 &#43;7,54 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L460">460</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="460">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L461">461</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="461"> #include &lt;stdlib.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L462">462</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="462"> #include &lt;stdint.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L463">463</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="463">&#43;#include &lt;string.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L464">464</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="464">&#43;#include &lt;assert.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L465">465</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="465"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L466">466</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="466"> #include &#34;libi3.h&#34;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L467">467</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="467"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L468">468</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="468">&#43;bool has_alpha(const char* hex) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L469">469</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="469">&#43;    assert(strlen(hex) &gt;= 7);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L470">470</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="470">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L471">471</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="471">&#43;    return hex[7] != &#39;\0&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L472">472</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="472">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L473">473</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="473">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L474">474</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="474">&#43;bool in_range(char val, char lower, char upper) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L475">475</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="475">&#43;    return lower &lt;= val &amp;&amp; val &lt;= upper;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L476">476</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="476">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L477">477</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="477">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L478">478</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="478">&#43;bool is_hex(char c) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L479">479</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="479">&#43;    return in_range(c, &#39;0&#39;, &#39;9&#39;)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L480">480</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="480">&#43;        || in_range(c, &#39;A&#39;, &#39;F&#39;)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L481">481</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="481">&#43;        || in_range(c, &#39;a&#39;, &#39;f&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L482">482</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="482">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L483">483</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="483">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L484">484</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="484">&#43;bool valid_colorpixel(const char* hex) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L485">485</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="485">&#43;    if (hex[0] != &#39;#&#39;) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L486">486</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="486">&#43;        return false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L487">487</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="487">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L488">488</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="488">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L489">489</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="489">&#43;    size_t len = strlen(hex);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L490">490</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="490">&#43;    if (len &lt; 7) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L491">491</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="491">&#43;        return false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L492">492</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="492">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L493">493</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="493">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L494">494</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="494">&#43;    if (has_alpha(hex)) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L495">495</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="495">&#43;        if (len != 9) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L496">496</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="496">&#43;            return false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L497">497</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="497">&#43;        }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L498">498</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="498">&#43;    } else if (len != 7) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L499">499</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="499">&#43;        return false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L500">500</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="500">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L501">501</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="501">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L502">502</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="502">&#43;    while (*&#43;&#43;hex) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L503">503</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="503">&#43;        if (!is_hex(*hex)) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L504">504</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="504">&#43;            return false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L505">505</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="505">&#43;        }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L506">506</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="506">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L507">507</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="507">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L508">508</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="508">&#43;    return true;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L509">509</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="509">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L510">510</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="510">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L511">511</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="511"> /*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L512">512</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="512">  * Returns the colorpixel to use for the given hex color (think of HTML). Only</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L513">513</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="513">  * works for true-color (vast majority of cases) at the moment, avoiding a</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L514">514</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="514">@@ -25,14 &#43;70,23 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L515">515</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="515">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L516">516</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="516">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L517">517</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="517"> uint32_t get_colorpixel(const char *hex) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L518">518</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="518">-    char strgroups[3][3] = {{hex[1], hex[2], &#39;\0&#39;},</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L519">519</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="519">-                            {hex[3], hex[4], &#39;\0&#39;},</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L520">520</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="520">-                            {hex[5], hex[6], &#39;\0&#39;}};</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L521">521</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="521">-    uint8_t r = strtol(strgroups[0], NULL, 16);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L522">522</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="522">-    uint8_t g = strtol(strgroups[1], NULL, 16);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L523">523</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="523">-    uint8_t b = strtol(strgroups[2], NULL, 16);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L524">524</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="524">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L525">525</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="525">-    /* We set the first 8 bits high to have 100% opacity in case of a 32 bit</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L526">526</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="526">&#43;    assert(valid_colorpixel(hex));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L527">527</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="527">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L528">528</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="528">&#43;    /* If specified without alpha, assume 100% opacity in case of a 32 bit</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L529">529</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="529">      * color depth visual. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L530">530</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="530">-    return (0xFF &lt;&lt; 24) | (r &lt;&lt; 16 | g &lt;&lt; 8 | b);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L531">531</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="531">&#43;    char strgroups[4][3] = {{&#39;F&#39;, &#39;F&#39;, &#39;\0&#39;}};</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L532">532</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="532">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L533">533</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="533">&#43;    size_t first_component = has_alpha(hex) ? 0 : 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L534">534</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="534">&#43;    for (size_t i = first_component; i &lt; 4; &#43;&#43;i) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L535">535</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="535">&#43;        strgroups[i][0] = *&#43;&#43;hex;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L536">536</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="536">&#43;        strgroups[i][1] = *&#43;&#43;hex;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L537">537</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="537">&#43;        strgroups[i][2] = &#39;\0&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L538">538</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="538">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L539">539</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="539">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L540">540</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="540">&#43;    uint8_t a = strtol(strgroups[0], NULL, 16);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L541">541</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="541">&#43;    uint8_t r = strtol(strgroups[1], NULL, 16);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L542">542</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="542">&#43;    uint8_t g = strtol(strgroups[2], NULL, 16);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L543">543</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="543">&#43;    uint8_t b = strtol(strgroups[3], NULL, 16);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L544">544</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="544">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L545">545</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="545">&#43;    return (a &lt;&lt; 24 | r &lt;&lt; 16 | g &lt;&lt; 8 | b);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L546">546</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="546"> }</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/config_directives.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L551">551</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="551">@@ -24,6 &#43;24,18 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L552">552</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="552">     y(map_close); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L553">553</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="553"> } while (0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L554">554</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="554"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L555">555</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="555">&#43;// Macro to sanitize user-provided color strings</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L556">556</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="556">&#43;#define APPLY_COLOR(classname, value) \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L557">557</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="557">&#43;    do { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L558">558</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="558">&#43;        if (value) { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L559">559</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="559">&#43;            if (valid_colorpixel(value)) { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L560">560</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="560">&#43;                config.client.classname = get_colorpixel(value); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L561">561</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="561">&#43;            } else { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L562">562</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="562">&#43;                ELOG(&#34;Invalid color specified for %s: %s&#34;, #classname, value); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L563">563</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="563">&#43;            } \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L564">564</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="564">&#43;        } \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L565">565</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="565">&#43;    } while  (0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L566">566</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="566">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L567">567</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="567"> /*******************************************************************************</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L568">568</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="568">  * Criteria functions.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L569">569</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="569">  ******************************************************************************/</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L570">570</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="570">@@ -403,19 &#43;415,19 @@ CFGFUN(popup_during_fullscreen, const char *value) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L571">571</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="571"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L572">572</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="572"> CFGFUN(color_single, const char *colorclass, const char *color) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L573">573</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="573">     /* used for client.background only currently */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L574">574</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="574">-    config.client.background = get_colorpixel(color);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L575">575</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="575">&#43;    if (strcmp(colorclass, &#34;client.background&#34;) == 0) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L576">576</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="576">&#43;        APPLY_COLOR(background, color);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L577">577</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="577">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L578">578</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="578"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L579">579</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="579"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L580">580</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="580"> CFGFUN(color, const char *colorclass, const char *border, const char *background, const char *text, const char *indicator) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L581">581</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="581"> #define APPLY_COLORS(classname) \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L582">582</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="582">     do { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L583">583</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="583">         if (strcmp(colorclass, &#34;client.&#34; #classname) == 0) { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L584">584</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="584">-            config.client.classname.border = get_colorpixel(border); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L585">585</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="585">-            config.client.classname.background = get_colorpixel(background); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L586">586</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="586">-            config.client.classname.text = get_colorpixel(text); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L587">587</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="587">-            if (indicator != NULL) { \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L588">588</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="588">-                config.client. classname .indicator = get_colorpixel(indicator); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L589">589</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="589">-            } \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L590">590</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="590">&#43;            APPLY_COLOR(classname.border, border); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L591">591</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="591">&#43;            APPLY_COLOR(classname.background, background); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L592">592</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="592">&#43;            APPLY_COLOR(classname.text, text); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L593">593</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="593">&#43;            APPLY_COLOR(classname.indicator, indicator); \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L594">594</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="594">         } \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L595">595</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="595">     } while (0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L596">596</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="596"> </pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/sighandler.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L601">601</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="601">@@ -24,6 &#43;24,8 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L602">602</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="602"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L603">603</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="603"> static void open_popups(void);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L604">604</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="604"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L605">605</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="605">&#43;extern xcb_visualtype_t* visual_type;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L606">606</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="606">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L607">607</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="607"> static xcb_gcontext_t pixmap_gc;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L608">608</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="608"> static xcb_pixmap_t pixmap;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L609">609</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="609"> static int raised_signal;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L610">610</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="610">@@ -150,7 &#43;152,7 @@ static int sig_draw_window(xcb_window_t win, int width, int height, int font_hei</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L611">611</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="611">         if (i == backtrace_string_index)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L612">612</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="612">             set_font_colors(pixmap_gc, get_colorpixel(bt_colour), get_colorpixel(&#34;#000000&#34;));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L613">613</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="613"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L614">614</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="614">-        draw_text(crash_text_i3strings[i], pixmap, pixmap_gc,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L615">615</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="615">&#43;        draw_text(crash_text_i3strings[i], pixmap, visual_type, pixmap_gc,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L616">616</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="616">                 8, 5 &#43; i * font_height, width - 16);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L617">617</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="617"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L618">618</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="618">         /* and reset the colour again for other lines */</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/x.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L623">623</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="623">@@ -15,6 &#43;15,8 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L624">624</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="624"> /* Stores the X11 window ID of the currently focused window */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L625">625</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="625"> xcb_window_t focused_id = XCB_NONE;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L626">626</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="626"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L627">627</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="627">&#43;xcb_visualtype_t* visual_type;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L628">628</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="628">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L629">629</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="629"> /* The bottom-to-top window stack of all windows which are managed by i3.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L630">630</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="630">  * Used for x_get_window_stack(). */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L631">631</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="631"> static xcb_window_t *btt_stack;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L632">632</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="632">@@ -99,7 &#43;101,10 @@ void x_con_init(Con *con, uint16_t depth) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L633">633</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="633">     if (depth != root_depth &amp;&amp; depth != XCB_COPY_FROM_PARENT) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L634">634</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="634">         /* For custom visuals, we need to create a colormap before creating</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L635">635</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="635">          * this window. It will be freed directly after creating the window. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L636">636</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="636">-        visual = get_visualid_by_depth(depth);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L637">637</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="637">&#43;        visual_type = xcb_aux_find_visual_by_attrs(root_screen, -1, depth);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L638">638</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="638">&#43;        if (visual_type) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L639">639</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="639">&#43;            visual = visual_type-&gt;visual_id;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L640">640</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="640">&#43;        }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L641">641</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="641">         win_colormap = xcb_generate_id(conn);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L642">642</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="642">         xcb_create_colormap_checked(conn, XCB_COLORMAP_ALLOC_NONE, win_colormap, root, visual);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L643">643</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="643"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L644">644</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="644">@@ -136,6 &#43;141,10 @@ void x_con_init(Con *con, uint16_t depth) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L645">645</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="645">         values[2] = colormap;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L646">646</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="646">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L647">647</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="647"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L648">648</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="648">&#43;    if (!visual_type) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L649">649</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="649">&#43;        visual_type = get_visualtype(root_screen);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L650">650</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="650">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L651">651</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="651">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L652">652</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="652">     Rect dims = { -15, -15, 10, 10 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L653">653</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="653">     con-&gt;frame = create_window(conn, dims, depth, visual, XCB_WINDOW_CLASS_INPUT_OUTPUT, XCURSOR_CURSOR_POINTER, false, mask, values);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L654">654</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="654"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L655">655</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="655">@@ -500,7 &#43;509,7 @@ void x_draw_decoration(Con *con) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L656">656</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="656">         free(tree);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L657">657</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="657"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L658">658</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="658">         draw_text_ascii(title,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L659">659</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="659">-                parent-&gt;pixmap, parent-&gt;pm_gc,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L660">660</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="660">&#43;                parent-&gt;pixmap, visual_type, parent-&gt;pm_gc,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L661">661</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="661">                 con-&gt;deco_rect.x &#43; 2, con-&gt;deco_rect.y &#43; text_offset_y,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L662">662</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="662">                 con-&gt;deco_rect.width - 2);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L663">663</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="663">         free(title);</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L664">664</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="664">@@ -529,7 &#43;538,7 @@ void x_draw_decoration(Con *con) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L665">665</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="665">     int indent_px = (indent_level * 5) * indent_mult;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L666">666</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="666"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L667">667</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="667">     draw_text(win-&gt;name,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L668">668</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="668">-            parent-&gt;pixmap, parent-&gt;pm_gc,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L669">669</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="669">&#43;            parent-&gt;pixmap, visual_type, parent-&gt;pm_gc,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L670">670</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="670">             con-&gt;deco_rect.x &#43; 2 &#43; indent_px, con-&gt;deco_rect.y &#43; text_offset_y,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L671">671</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="671">             con-&gt;deco_rect.width - 2 - indent_px);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L672">672</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="672"> </pre>
  </td>
  </tr>


</table>
</div>


</div>

  </body>
</html>

