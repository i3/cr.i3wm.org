
<!DOCTYPE html>
<html>
  <head>
    <title>i3 Patch: Added support for i3status to display file contents</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" media="screen" href="http://i3wm.org/css/style.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/public/stylesheets/main.css">
    <link rel="shortcut icon" type="image/png" href="http://i3wm.org/favicon.png">
    <script src="/public/js/jquery-1.9.0.min.js" type="text/javascript" charset="utf-8"></script>
	<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
    
    
      <script src="/public/js/patch.js" type="text/javascript" charset="utf-8"></script>
    
  </head>
  <body>


<div id="main">
	<a href="/"><h1 id="title">i3 - improved tiling WM</h1></a>
				<ul id="nav">
						<li><a style="border-bottom: 2px solid #fff" href="/">Reviews</a></li>
						<li><a href="http://bugs.i3wm.org/">Bugs</a></li>
				</ul>
<br style="clear: both">

<div id="content">

<h1>Added support for i3status to display file contents</h1>
<div style="float: right">
<p>
Patch status: rejected
</p>
<p>
Patch by EscapedNull
</p>
</div>



<p>
To apply this patch, use:<br>
<code>curl http://cr.i3wm.org/patch/393/raw.patch | git am</code>
</p>




<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3status.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L17">17</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="17">@@ -302,6 &#43;302,15 @@ int main(int argc, char *argv[]) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L18">18</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="18">                 CFG_END()</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L19">19</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="19">         };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L20">20</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="20"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L21">21</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="21">&#43;        cfg_opt_t file_opts[] = {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L22">22</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="22">&#43;                CFG_STR(&#34;format&#34;, &#34;%contents (%mtime_diff)&#34;, CFGF_NONE),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L23">23</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="23">&#43;                CFG_INT(&#34;line&#34;, 1, CFGF_NONE),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L24">24</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="24">&#43;                CFG_INT(&#34;skip&#34;, 0, CFGF_NONE),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L25">25</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="25">&#43;                CFG_INT(&#34;limit&#34;, 4096, CFGF_NONE),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L26">26</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="26">&#43;                CFG_STR(&#34;mtime_format&#34;, &#34;%H:%M:%S&#34;, CFGF_NONE),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L27">27</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="27">&#43;                CFG_END()</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L28">28</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="28">&#43;        };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L29">29</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="29">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L30">30</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="30">         cfg_opt_t opts[] = {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L31">31</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="31">                 CFG_STR_LIST(&#34;order&#34;, &#34;{}&#34;, CFGF_NONE),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L32">32</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="32">                 CFG_SEC(&#34;general&#34;, general_opts, CFGF_NONE),</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L33">33</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="33">@@ -319,6 &#43;328,7 @@ int main(int argc, char *argv[]) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L34">34</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="34">                 CFG_SEC(&#34;ddate&#34;, ddate_opts, CFGF_NONE),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L35">35</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="35">                 CFG_SEC(&#34;load&#34;, load_opts, CFGF_NONE),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L36">36</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="36">                 CFG_SEC(&#34;cpu_usage&#34;, usage_opts, CFGF_NONE),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L37">37</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="37">&#43;                CFG_SEC(&#34;file&#34;, file_opts, CFGF_TITLE | CFGF_MULTI),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L38">38</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="38">                 CFG_CUSTOM_COLOR_OPTS,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L39">39</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="39">                 CFG_END()</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L40">40</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="40">         };</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L41">41</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="41">@@ -547,6 &#43;557,12 @@ int main(int argc, char *argv[]) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L42">42</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="42">                                 print_cpu_usage(json_gen, buffer, cfg_getstr(sec, &#34;format&#34;));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L43">43</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="43">                                 SEC_CLOSE_MAP;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L44">44</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="44">                         }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L45">45</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="45">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L46">46</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="46">&#43;                        CASE_SEC_TITLE(&#34;file&#34;) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L47">47</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="47">&#43;                                SEC_OPEN_MAP(&#34;file&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L48">48</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="48">&#43;                                print_file(json_gen, buffer, title, cfg_getstr(sec, &#34;format&#34;), cfg_getint(sec, &#34;line&#34;), cfg_getint(sec, &#34;skip&#34;), cfg_getint(sec, &#34;limit&#34;), cfg_getstr(sec, &#34;mtime_format&#34;));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L49">49</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="49">&#43;                                SEC_CLOSE_MAP;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L50">50</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="50">&#43;                        }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L51">51</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="51">                 }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L52">52</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="52">                 if (output_format == O_I3BAR) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L53">53</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="53">                         yajl_gen_array_close(json_gen);</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/i3status.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L58">58</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="58">@@ -158,6 &#43;158,7 @@ void print_cpu_usage(yajl_gen json_gen, char *buffer, const char *format);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L59">59</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="59"> void print_eth_info(yajl_gen json_gen, char *buffer, const char *interface, const char *format_up, const char *format_down);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L60">60</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="60"> void print_load(yajl_gen json_gen, char *buffer, const char *format, const float max_threshold);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L61">61</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="61"> void print_volume(yajl_gen json_gen, char *buffer, const char *fmt, const char *fmt_muted, const char *device, const char *mixer, int mixer_idx);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L62">62</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="62">&#43;void print_file(yajl_gen json_gen, char *buffer, const char *title, const char *format, const int line, const int skip, const int limit, const char *mtime_format);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L63">63</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="63"> bool process_runs(const char *path);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L64">64</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="64"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L65">65</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="65"> /* socket file descriptor for general purposes */</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/man/i3status.man</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L70">70</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="70">@@ -376,6 &#43;376,49 @@ volume master {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L71">71</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="71"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L72">72</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="72"> -------------------------------------------------------------</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L73">73</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="73"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L74">74</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="74">&#43;=== File</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L75">75</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="75">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L76">76</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="76">&#43;Prints a file&#39;s contents at the specified line, and/or its modification time.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L77">77</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="77">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L78">78</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="78">&#43;&#43;format&#43; specifies how the file should be displayed. It has the following variables:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L79">79</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="79">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L80">80</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="80">&#43;&#43;%contents&#43; displays the file&#39;s contents according to &#43;line&#43;, &#43;skip&#43;, and &#43;limit&#43;.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L81">81</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="81">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L82">82</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="82">&#43;&#43;%mtime&#43; shows the file&#39;s modification time according to &#43;mtime_format&#43;. By default,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L83">83</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="83">&#43;&#34;%H:%M:%S&#34; is used.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L84">84</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="84">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L85">85</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="85">&#43;&#43;%mtime_diff&#43; expands to the file&#39;s age in a coarse, concise, human-readable format.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L86">86</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="86">&#43;For example, &#34;1y&#34; or &#34;28m&#34;. Only the largest unit of time is displayed.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L87">87</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="87">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L88">88</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="88">&#43;&#43;mtime_format&#43; defines which units of time should be displayed as specified by</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L89">89</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="89">&#43;strftime(3).</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L90">90</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="90">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L91">91</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="91">&#43;&#43;line&#43; specifies which line (delimited by &#34;\r&#34;, &#34;\n&#34;, or &#34;\r\n&#34;) should be displayed.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L92">92</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="92">&#43;Negative values for &#43;line&#43; will be counted from the bottom. For example, &#43;line = -1&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L93">93</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="93">&#43;behaves similarly to tail(1). If the line does not exist, &#43;%contents&#43; will be blank.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L94">94</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="94">&#43;Note that many plain text files contain a trailing newline, in which case you should</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L95">95</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="95">&#43;subtract one from the desired &#43;line&#43; when using a negative value.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L96">96</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="96">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L97">97</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="97">&#43;i3status removes &#43;skip&#43; bytes from the beginning of the specified line before</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L98">98</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="98">&#43;displaying it. Similarly, i3status will not display more than &#43;limit&#43; bytes</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L99">99</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="99">&#43;after &#43;skip&#43;.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L100">100</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="100">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L101">101</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="101">&#43;*Example order*: &#43;file /var/log/Xorg.0.log&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L102">102</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="102">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L103">103</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="103">&#43;*Example format*: &#43;(%mtime_diff) %contents&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L104">104</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="104">&#43;*Example format_mtime*: &#43;%a %Y/%m/%d %H:%M:%S&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L105">105</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="105">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L106">106</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="106">&#43;*Example configuration*:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L107">107</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="107">&#43;-------------------------------------------------------------</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L108">108</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="108">&#43;file /var/log/Xorg.0.log {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L109">109</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="109">&#43;	format = &#34;[%mtime] %contents (%mtime_diff ago)&#34;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L110">110</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="110">&#43;	mtime_format = &#34;%a %H:%M:%S&#34;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L111">111</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="111">&#43;	line = -2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L112">112</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="112">&#43;	skip = 10</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L113">113</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="113">&#43;	limit = 20</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L114">114</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="114">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L115">115</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="115">&#43;-------------------------------------------------------------</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L116">116</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="116">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L117">117</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="117"> == Using i3status with dzen2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L118">118</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="118"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L119">119</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="119"> After installing dzen2, you can directly use it with i3status. Just ensure that</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/print_file.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L125">125</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="125">@@ -0,0 &#43;1,129 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L126">126</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="126">&#43;#include &lt;stdio.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L127">127</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="127">&#43;#include &lt;string.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L128">128</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="128">&#43;#include &lt;sys/stat.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L129">129</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="129">&#43;#include &lt;fcntl.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L130">130</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="130">&#43;#include &lt;time.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L131">131</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="131">&#43;#include &lt;yajl/yajl_gen.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L132">132</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="132">&#43;#include &lt;yajl/yajl_version.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L133">133</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="133">&#43;#include &lt;sys/stat.h&gt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L134">134</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="134">&#43;#include &#34;i3status.h&#34;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L135">135</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="135">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L136">136</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="136">&#43;bool file_line(char *buffer, const char *title, const int line, const int skip, const int limit);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L137">137</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="137">&#43;void format(char *buffer, const char *fmt, const char *title, const struct stat *st);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L138">138</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="138">&#43;void format_mtime_diff(char *buffer, const time_t end, const time_t beginning);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L139">139</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="139">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L140">140</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="140">&#43;/**Prints the contents of a file, up to 4096 bytes, according to the configuration.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L141">141</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="141">&#43; * @param title - the title of the &#34;file&#34; directive (the path of the file)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L142">142</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="142">&#43; * @param fmt - the output format string specified by the config file. </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L143">143</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="143">&#43; * @param line - the line of the file to display. Negative values start at the bottom of the file.*/</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L144">144</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="144">&#43;void print_file(yajl_gen json_gen, char *buffer, const char *title, const char *format, const int line, const int skip, const int limit, const char *mtime_format) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L145">145</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="145">&#43;	char *outwalk = buffer;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L146">146</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="146">&#43;	const char *walk = format;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L147">147</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="147">&#43;	for(; *walk != &#39;\0&#39;; walk&#43;&#43;) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L148">148</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="148">&#43;		if(*walk == &#39;%&#39;) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L149">149</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="149">&#43;			if(BEGINS_WITH(walk&#43;1, &#34;mtime&#34;)) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L150">150</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="150">&#43;				struct stat st;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L151">151</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="151">&#43;				int err = stat(title, &amp;st);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L152">152</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="152">&#43;				if(err) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L153">153</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="153">&#43;					perror(title);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L154">154</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="154">&#43;					return;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L155">155</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="155">&#43;				} else if(BEGINS_WITH(walk&#43;1, &#34;mtime_diff&#34;)) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L156">156</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="156">&#43;					char buf[1024];</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L157">157</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="157">&#43;					format_mtime_diff(buf, time(NULL), st.st_mtime);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L158">158</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="158">&#43;					outwalk &#43;= sprintf(outwalk, buf);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L159">159</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="159">&#43;				} else {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L160">160</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="160">&#43;					char mtime_buf[1024]; //holds the nicely formatted output text from format_mtime</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L161">161</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="161">&#43;					struct tm *lmtime = localtime(&amp;(st.st_mtime));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L162">162</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="162">&#43;					strftime(mtime_buf, 1024, mtime_format, lmtime);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L163">163</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="163">&#43;					outwalk &#43;= sprintf(outwalk, mtime_buf);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L164">164</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="164">&#43;				}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L165">165</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="165">&#43;			} else if(BEGINS_WITH(walk&#43;1, &#34;contents&#34;)) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L166">166</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="166">&#43;				char fbuf[4096];</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L167">167</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="167">&#43;				file_line(fbuf, title, line, skip, limit);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L168">168</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="168">&#43;				outwalk &#43;= sprintf(outwalk, fbuf);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L169">169</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="169">&#43;			}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L170">170</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="170">&#43;		}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L171">171</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="171">&#43;	}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L172">172</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="172">&#43;        OUTPUT_FULL_TEXT(buffer);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L173">173</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="173">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L174">174</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="174">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L175">175</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="175">&#43;bool file_line(char *buffer, const char *title, const int line, const int skip, const int limit) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L176">176</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="176">&#43;	char rb[4096]; //read buffer (next 4096 byte block of data)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L177">177</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="177">&#43;	int last_read; //number of bytes returned by the last read(3)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L178">178</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="178">&#43;	int cline = 0; //current line</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L179">179</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="179">&#43;	int i = 0; //position in the read buffer</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L180">180</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="180">&#43;	int j = 0; //position in the line buffer</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L181">181</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="181">&#43;	int k = 0; //bytes read since last new line</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L182">182</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="182">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L183">183</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="183">&#43;	int fd = open(title, O_RDONLY);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L184">184</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="184">&#43;	if(fd == -1) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L185">185</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="185">&#43;		perror(title);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L186">186</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="186">&#43;		return false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L187">187</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="187">&#43;	}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L188">188</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="188">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L189">189</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="189">&#43;	if(line &lt; 0) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L190">190</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="190">&#43;		/* Seek to the end of the file.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L191">191</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="191">&#43; 		 * Read backwards, decrementing cline every time we hit a newline.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L192">192</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="192">&#43; 		 * When cline == line, seek to the newline&#43;1 and let the next code block do the work. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L193">193</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="193">&#43;		int pos = lseek(fd, 0, SEEK_END);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L194">194</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="194">&#43;		int last_pos = pos;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L195">195</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="195">&#43;		while(cline != line) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L196">196</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="196">&#43;			pos = lseek(fd, pos &gt; 4096 ? pos-4096 : 0, SEEK_SET);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L197">197</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="197">&#43;			if(last_pos == pos) { //we have hit the beginning of the file</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L198">198</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="198">&#43;				cline--;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L199">199</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="199">&#43;				pos = lseek(fd, 0, SEEK_SET);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L200">200</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="200">&#43;				fprintf(stderr, &#34;%s: Hit top of file searching for line %d.&#34;, title, line);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L201">201</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="201">&#43;				break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L202">202</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="202">&#43;			}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L203">203</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="203">&#43;			last_read = read(fd, rb, last_pos-pos);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L204">204</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="204">&#43;			if(last_read &lt; 0) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L205">205</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="205">&#43;				perror(title);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L206">206</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="206">&#43;				return false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L207">207</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="207">&#43;			}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L208">208</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="208">&#43;			for(i = last_read; i &gt; 0 &amp;&amp; cline != line; i--) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L209">209</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="209">&#43;				if(rb[i-1] == &#39;\r&#39; &amp;&amp; rb[i] == &#39;\n&#39;) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L210">210</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="210">&#43;					cline--;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L211">211</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="211">&#43;					i--; //skip the \n</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L212">212</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="212">&#43;				} else if(rb[i] == &#39;\r&#39; || rb[i] == &#39;\n&#39;) cline--;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L213">213</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="213">&#43;				if(cline == line) pos = lseek(fd, pos&#43;i&#43;1, SEEK_SET);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L214">214</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="214">&#43;			}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L215">215</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="215">&#43;			last_pos = pos;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L216">216</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="216">&#43;		}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L217">217</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="217">&#43;	}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L218">218</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="218">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L219">219</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="219">&#43;	do {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L220">220</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="220">&#43;		last_read = read(fd, rb, 4096);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L221">221</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="221">&#43;		if(last_read &lt; 0) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L222">222</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="222">&#43;			perror(title);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L223">223</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="223">&#43;			return false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L224">224</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="224">&#43;		}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L225">225</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="225">&#43;		for(i = 0; i &lt; last_read &amp;&amp; cline &lt;= line; i&#43;&#43;, k&#43;&#43;) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L226">226</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="226">&#43;			if(rb[i] == &#39;\r&#39; &amp;&amp; rb[i&#43;1] == &#39;\n&#39;) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L227">227</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="227">&#43;				cline&#43;&#43;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L228">228</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="228">&#43;				i&#43;&#43;; //skip the \n</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L229">229</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="229">&#43;				k  = j = 0;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L230">230</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="230">&#43;			} else if(rb[i] == &#39;\r&#39; || rb[i] == &#39;\n&#39;) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L231">231</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="231">&#43;				cline&#43;&#43;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L232">232</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="232">&#43;				k = j = 0;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L233">233</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="233">&#43;			} else if(cline == line &amp;&amp; k &gt;= skip &amp;&amp; j &lt; limit) buffer[j&#43;&#43;] = rb[i];</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L234">234</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="234">&#43;		}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L235">235</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="235">&#43;	} while(last_read == 4096 &amp;&amp; cline &lt;= line);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L236">236</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="236">&#43;	return true;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L237">237</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="237">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L238">238</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="238">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L239">239</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="239">&#43;void format_mtime_diff(char *buffer, const time_t end, const time_t beginning) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L240">240</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="240">&#43;	time_t diff = difftime(end, beginning);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L241">241</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="241">&#43;	time_t years = diff / (60*60*24*365);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L242">242</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="242">&#43;	time_t months = diff / (60*60*24*30);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L243">243</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="243">&#43;	time_t days = diff / (60*60*24);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L244">244</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="244">&#43;	time_t hours = diff / (60*60);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L245">245</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="245">&#43;	time_t minutes = diff / 60;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L246">246</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="246">&#43;	time_t seconds = diff;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L247">247</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="247">&#43;	if(years &gt;= 1) sprintf(buffer, &#34;%dy&#34;, (int) years);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L248">248</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="248">&#43;	else if(months &gt;= 1) sprintf(buffer, &#34;%dmo&#34;, (int) months);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L249">249</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="249">&#43;	else if(days &gt;= 1) sprintf(buffer, &#34;%dd&#34;, (int) days);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L250">250</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="250">&#43;	else if(hours &gt;= 1) sprintf(buffer, &#34;%dh&#34;, (int) hours);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L251">251</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="251">&#43;	else if(minutes &gt;= 1) sprintf(buffer, &#34;%dm&#34;, (int) minutes);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L252">252</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="252">&#43;	else if(seconds &gt;= 1) sprintf(buffer, &#34;%ds&#34;, (int) seconds);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L253">253</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="253">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L254">254</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="254">&#43;}</pre>
  </td>
  </tr>


</table>
</div>


</div>

  </body>
</html>

