
<!DOCTYPE html>
<html>
  <head>
    <title>i3 Patch: move scratchpad on a scratchpad windows inserts in head</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" media="screen" href="http://i3wm.org/css/style.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/public/stylesheets/main.css">
    <link rel="shortcut icon" type="image/png" href="http://i3wm.org/favicon.png">
    <script src="/public/js/jquery-1.9.0.min.js" type="text/javascript" charset="utf-8"></script>
	<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
    
    
      <script src="/public/js/patch.js" type="text/javascript" charset="utf-8"></script>
    
  </head>
  <body>


<div id="main">
	<a href="/"><h1 id="title">i3 - improved tiling WM</h1></a>
				<ul id="nav">
						<li><a style="border-bottom: 2px solid #fff" href="/">Reviews</a></li>
						<li><a href="http://bugs.i3wm.org/">Bugs</a></li>
				</ul>
<br style="clear: both">

<div id="content">

<h1>move scratchpad on a scratchpad windows inserts in head</h1>
<div style="float: right">
<p>
Patch status: rejected
</p>
<p>
Patch by Philippe Virouleau
</p>
</div>

<p>
<strong>Long description</strong>:<br>
<pre>Implement the behaviour described in #1035 : &#39;scratchpad show&#39; cycles
between windows, &#39;scratchpad move&#39; on a scratchpad window makes it the
next to be displayed by &#39;scratchpad show&#39;.
</pre>
</p>


<p>
To apply this patch, use:<br>
<code>curl http://cr.i3wm.org/patch/248/raw.patch | git am</code>
</p>




<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/data.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L23">23</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="23">@@ -585,7 &#43;585,11 @@ struct Con {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L24">24</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="24">         SCRATCHPAD_FRESH = 1,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L25">25</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="25"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L26">26</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="26">         /* The user changed position/size of the scratchpad window. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L27">27</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="27">-        SCRATCHPAD_CHANGED = 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L28">28</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="28">&#43;        SCRATCHPAD_CHANGED = 2,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L29">29</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="29">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L30">30</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="30">&#43;        /* A scratchpad window moving to scratchpad again through an</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L31">31</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="31">&#43;         * actual &#39;scratchpad move&#39;. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L32">32</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="32">&#43;        SCRATCHPAD_MOVE = 3</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L33">33</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="33">     } scratchpad_state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L34">34</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="34"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L35">35</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="35">     /* The ID of this container before restarting. Necessary to correctly</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/scratchpad.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L40">40</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="40">@@ -17,7 &#43;17,7 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L41">41</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="41">  * Gets called upon the command &#39;move scratchpad&#39;.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L42">42</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="42">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L43">43</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="43">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L44">44</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="44">-void scratchpad_move(Con *con);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L45">45</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="45">&#43;void scratchpad_move(Con *con, bool from_show);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L46">46</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="46"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L47">47</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="47"> /**</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L48">48</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="48">  * Either shows the top-most scratchpad window (con == NULL) or shows the</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/commands.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L53">53</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="53">@@ -1786,7 &#43;1786,7 @@ void cmd_move_scratchpad(I3_CMD) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L54">54</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="54"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L55">55</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="55">     TAILQ_FOREACH(current, &amp;owindows, owindows) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L56">56</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="56">         DLOG(&#34;matching: %p / %s\n&#34;, current-&gt;con, current-&gt;con-&gt;name);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L57">57</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="57">-        scratchpad_move(current-&gt;con);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L58">58</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="58">&#43;        scratchpad_move(current-&gt;con, false);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L59">59</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="59">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L60">60</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="60"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L61">61</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="61">     cmd_output-&gt;needs_tree_render = true;</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/con.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L66">66</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="66">@@ -138,7 &#43;138,12 @@ void con_attach(Con *con, Con *parent, bool ignore_focus) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L67">67</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="67"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L68">68</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="68">     if (con-&gt;type == CT_FLOATING_CON) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L69">69</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="69">         DLOG(&#34;Inserting into floating containers\n&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L70">70</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="70">-        TAILQ_INSERT_TAIL(&amp;(parent-&gt;floating_head), con, floating_windows);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L71">71</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="71">&#43;        Con *floating;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L72">72</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="72">&#43;        if ((floating = con_inside_floating(con))</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L73">73</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="73">&#43;                &amp;&amp; floating-&gt;scratchpad_state == SCRATCHPAD_MOVE)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L74">74</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="74">&#43;            TAILQ_INSERT_HEAD(&amp;(parent-&gt;floating_head), con, floating_windows);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L75">75</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="75">&#43;        else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L76">76</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="76">&#43;            TAILQ_INSERT_TAIL(&amp;(parent-&gt;floating_head), con, floating_windows);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L77">77</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="77">     } else {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L78">78</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="78">         if (!ignore_focus) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L79">79</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="79">             /* Get the first tiling container in focus stack */</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/ipc.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L84">84</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="84">@@ -176,6 &#43;176,9 @@ void dump_node(yajl_gen gen, struct Con *con, bool inplace_restart) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L85">85</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="85">         case SCRATCHPAD_CHANGED:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L86">86</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="86">             ystr(&#34;changed&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L87">87</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="87">             break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L88">88</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="88">&#43;        case SCRATCHPAD_MOVE:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L89">89</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="89">&#43;            ystr(&#34;move&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L90">90</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="90">&#43;            break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L91">91</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="91">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L92">92</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="92"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L93">93</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="93">     ystr(&#34;percent&#34;);</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/load_layout.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L98">98</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="98">@@ -254,6 &#43;254,8 @@ static int json_string(void *ctx, const unsigned char *val, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L99">99</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="99">                 json_node-&gt;scratchpad_state = SCRATCHPAD_FRESH;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L100">100</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="100">             else if (strcasecmp(buf, &#34;changed&#34;) == 0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L101">101</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="101">                 json_node-&gt;scratchpad_state = SCRATCHPAD_CHANGED;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L102">102</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="102">&#43;            else if (strcasecmp(buf, &#34;move&#34;) == 0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L103">103</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="103">&#43;                json_node-&gt;scratchpad_state = SCRATCHPAD_MOVE;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L104">104</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="104">             free(buf);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L105">105</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="105">         }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L106">106</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="106">     }</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/scratchpad.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L111">111</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="111">@@ -18,7 &#43;18,7 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L112">112</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="112">  * Gets called upon the command &#39;move scratchpad&#39;.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L113">113</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="113">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L114">114</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="114">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L115">115</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="115">-void scratchpad_move(Con *con) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L116">116</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="116">&#43;void scratchpad_move(Con *con, bool from_show) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L117">117</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="117">     if (con-&gt;type == CT_WORKSPACE) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L118">118</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="118">         LOG(&#34;&#39;move scratchpad&#39; used on a workspace \&#34;%s\&#34;. Calling it &#34;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L119">119</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="119">             &#34;recursively on all windows on this workspace.\n&#34;, con-&gt;name);</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L120">120</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="120">@@ -26,7 &#43;26,7 @@ void scratchpad_move(Con *con) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L121">121</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="121">         current = TAILQ_FIRST(&amp;(con-&gt;focus_head));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L122">122</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="122">         while (current) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L123">123</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="123">             Con *next = TAILQ_NEXT(current, focused);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L124">124</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="124">-            scratchpad_move(current);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L125">125</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="125">&#43;            scratchpad_move(current, from_show);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L126">126</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="126">             current = next;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L127">127</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="127">         }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L128">128</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="128">         return;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L129">129</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="129">@@ -57,10 &#43;57,21 @@ void scratchpad_move(Con *con) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L130">130</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="130">         con = maybe_floating_con;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L131">131</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="131">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L132">132</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="132"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L133">133</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="133">&#43;    /*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L134">134</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="134">&#43;     * If this is an actual &#39;scratchpad move&#39; and the window is a scratchpad window,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L135">135</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="135">&#43;     * set the scratchpad_state to SCRATCHPAD_MOVE so that it&#39;s moved to</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L136">136</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="136">&#43;     * top of the queue</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L137">137</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="137">&#43;     */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L138">138</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="138">&#43;    int tmp_state = con-&gt;scratchpad_state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L139">139</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="139">&#43;    if (!from_show &amp;&amp; con-&gt;scratchpad_state != SCRATCHPAD_NONE)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L140">140</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="140">&#43;        con-&gt;scratchpad_state = SCRATCHPAD_MOVE;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L141">141</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="141">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L142">142</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="142">     /* 2: Send the window to the __i3_scratch workspace, mainting its</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L143">143</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="143">      * coordinates and not warping the pointer. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L144">144</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="144">     con_move_to_workspace(con, __i3_scratch, true, true);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L145">145</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="145"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L146">146</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="146">&#43;    con-&gt;scratchpad_state = tmp_state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L147">147</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="147">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L148">148</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="148">     /* 3: If this is the first time this window is used as a scratchpad, we set</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L149">149</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="149">      * the scratchpad_state to SCRATCHPAD_FRESH. The window will then be</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L150">150</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="150">      * adjusted in size according to what the user specifies. */</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L151">151</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="151">@@ -97,7 &#43;108,7 @@ void scratchpad_show(Con *con) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L152">152</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="152">         (floating = con_inside_floating(focused)) &amp;&amp;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L153">153</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="153">         floating-&gt;scratchpad_state != SCRATCHPAD_NONE) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L154">154</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="154">         DLOG(&#34;Focused window is a scratchpad window, hiding it.\n&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L155">155</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="155">-        scratchpad_move(focused);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L156">156</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="156">&#43;        scratchpad_move(focused, true);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L157">157</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="157">         return;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L158">158</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="158">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L159">159</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="159"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L160">160</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="160">@@ -165,7 &#43;176,7 @@ void scratchpad_show(Con *con) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L161">161</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="161">          * it, otherwise we should move it to the active workspace. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L162">162</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="162">         if (current == active) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L163">163</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="163">             DLOG(&#34;Window is a scratchpad window, hiding it.\n&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L164">164</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="164">-            scratchpad_move(con);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L165">165</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="165">&#43;            scratchpad_move(con, true);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L166">166</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="166">             return;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L167">167</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="167">         }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L168">168</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="168">     }</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/testcases/t/185-scratchpad.t</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L173">173</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="173">@@ -398,10 &#43;398,11 @@ sub verify_scratchpad_move_with_visible_scratch_con {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L174">174</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="174">     # hide window 1 again</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L175">175</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="175">     cmd &#39;move scratchpad&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L176">176</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="176"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L177">177</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="177">-    # this should bring up window 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L178">178</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="178">&#43;    # Since #1035</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L179">179</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="179">&#43;    # this should bring up window 1</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L180">180</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="180">     cmd &#34;workspace $first&#34;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L181">181</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="181">     cmd &#39;scratchpad show&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L182">182</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="182">-    is($x-&gt;input_focus, $window2-&gt;id, &#34;showed the correct scratchpad window&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L183">183</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="183">&#43;    is($x-&gt;input_focus, $window1-&gt;id, &#34;showed the correct scratchpad window&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L184">184</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="184"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L185">185</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="185"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L186">186</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="186"> # let&#39;s clear the scratchpad first</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L187">187</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="187">@@ -428,21 &#43;429,91 @@ does_i3_live;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L188">188</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="188"> # when another window on the same workspace has focus</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L189">189</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="189"> ################################################################################</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L190">190</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="190"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L191">191</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="191">&#43;sub test_scratchpad_show_moves_focus {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L192">192</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="192">&#43;    my $ws = fresh_workspace;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L193">193</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="193">&#43;    cmd &#34;workspace $ws&#34;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L194">194</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="194">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L195">195</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="195">&#43;    open_window;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L196">196</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="196">&#43;    my $scratch = get_focused($ws);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L197">197</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="197">&#43;    cmd &#39;move scratchpad&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L198">198</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="198">&#43;    cmd &#39;scratchpad show&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L199">199</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="199">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L200">200</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="200">&#43;    open_window;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L201">201</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="201">&#43;    my $not_scratch = get_focused($ws);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L202">202</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="202">&#43;    is(get_focused($ws), $not_scratch, &#39;not scratch window has focus&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L203">203</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="203">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L204">204</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="204">&#43;    cmd &#39;scratchpad show&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L205">205</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="205">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L206">206</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="206">&#43;    is(get_focused($ws), $scratch, &#39;scratchpad is focused&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L207">207</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="207">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L208">208</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="208">&#43;    #Kill the scratchpad window so that it doesn&#39;t interfere with other tests</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L209">209</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="209">&#43;    cmd &#39;kill&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L210">210</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="210">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L211">211</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="211">&#43;    is(get_focused($ws), $not_scratch, &#39;not scratch window has focus&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L212">212</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="212">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L213">213</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="213">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L214">214</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="214"> clear_scratchpad;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L215">215</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="215">-my $ws = fresh_workspace;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L216">216</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="216">&#43;is (scalar @{get_ws(&#39;__i3_scratch&#39;)-&gt;{floating_nodes}}, 0, &#34;scratchpad is empty&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L217">217</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="217">&#43;test_scratchpad_show_moves_focus;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L218">218</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="218"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L219">219</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="219">-open_window;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L220">220</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="220">-my $scratch = get_focused($ws);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L221">221</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="221">-cmd &#39;move scratchpad&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L222">222</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="222">-cmd &#39;scratchpad show&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L223">223</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="223">&#43;################################################################################</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L224">224</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="224">&#43;# 13bis: Test the following behaviour :</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L225">225</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="225">&#43;# With multiple windows in the scratchpad, &#39;scratchpad_show&#39; cycles between</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L226">226</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="226">&#43;# them, and &#39;scratchpad move&#39; on a scratchpad window makes it the next to be</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L227">227</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="227">&#43;# displayed with &#39;scratchpad show&#39;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L228">228</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="228">&#43;################################################################################</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L229">229</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="229"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L230">230</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="230">-open_window;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L231">231</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="231">-my $not_scratch = get_focused($ws);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L232">232</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="232">-is(get_focused($ws), $not_scratch, &#39;not scratch window has focus&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L233">233</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="233">&#43;sub test_scratchpad_move_to_head {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L234">234</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="234"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L235">235</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="235">-cmd &#39;scratchpad show&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L236">236</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="236">&#43;    my $ws = fresh_workspace;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L237">237</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="237">&#43;    cmd &#34;workspace $ws&#34;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L238">238</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="238">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L239">239</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="239">&#43;    my $window1 = open_window;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L240">240</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="240">&#43;    cmd &#39;move scratchpad&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L241">241</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="241">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L242">242</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="242">&#43;    my $window2 = open_window;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L243">243</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="243">&#43;    cmd &#39;move scratchpad&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L244">244</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="244"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L245">245</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="245">-is(get_focused($ws), $scratch, &#39;scratchpad is focused&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L246">246</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="246">&#43;    # this should bring up window 1</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L247">247</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="247">&#43;    cmd &#39;scratchpad show&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L248">248</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="248">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L249">249</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="249">&#43;    is(scalar @{get_ws($ws)-&gt;{floating_nodes}}, 1, &#39;one floating node on ws&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L250">250</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="250">&#43;    is($x-&gt;input_focus, $window1-&gt;id, &#34;showed the correct scratchpad window1&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L251">251</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="251">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L252">252</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="252">&#43;    #this should hide window 1</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L253">253</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="253">&#43;    cmd &#39;scratchpad show&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L254">254</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="254">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L255">255</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="255">&#43;    is(scalar @{get_ws($ws)-&gt;{floating_nodes}}, 0, &#39;no floating node on ws&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L256">256</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="256">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L257">257</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="257">&#43;    #this should show window 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L258">258</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="258">&#43;    cmd &#39;scratchpad show&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L259">259</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="259">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L260">260</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="260">&#43;    is(scalar @{get_ws($ws)-&gt;{floating_nodes}}, 1, &#39;one floating node on ws&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L261">261</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="261">&#43;    is($x-&gt;input_focus, $window2-&gt;id, &#34;showed the correct scratchpad window2&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L262">262</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="262">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L263">263</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="263">&#43;    #this should hide window 2 and make it the next window to be displayed</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L264">264</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="264">&#43;    cmd &#39;move scratchpad&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L265">265</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="265">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L266">266</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="266">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L267">267</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="267">&#43;    is(scalar @{get_ws($ws)-&gt;{floating_nodes}}, 0, &#39;no floating node on ws&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L268">268</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="268">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L269">269</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="269">&#43;    #this should show window 2 (#1035)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L270">270</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="270">&#43;    cmd &#39;scratchpad show&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L271">271</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="271">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L272">272</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="272">&#43;    is(scalar @{get_ws($ws)-&gt;{floating_nodes}}, 1, &#39;one floating node on ws&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L273">273</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="273">&#43;    is($x-&gt;input_focus, $window2-&gt;id, &#34;showed the correct scratchpad window2&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L274">274</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="274">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L275">275</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="275">&#43;    #clean</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L276">276</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="276">&#43;    cmd &#39;kill&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L277">277</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="277">&#43;    cmd &#39;scratchpad show&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L278">278</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="278">&#43;    cmd &#39;kill&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L279">279</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="279">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L280">280</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="280">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L281">281</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="281">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L282">282</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="282">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L283">283</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="283">&#43;clear_scratchpad;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L284">284</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="284">&#43;is (scalar @{get_ws(&#39;__i3_scratch&#39;)-&gt;{floating_nodes}}, 0, &#34;scratchpad is empty&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L285">285</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="285">&#43;test_scratchpad_move_to_head;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L286">286</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="286"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L287">287</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="287"> # TODO: make i3bar display *something* when a window on the scratchpad has the urgency hint</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L288">288</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="288"> </pre>
  </td>
  </tr>


</table>
</div>


</div>

  </body>
</html>

