
<!DOCTYPE html>
<html>
  <head>
    <title>i3 Patch: Remove yajl major version conditionals</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" media="screen" href="http://i3wm.org/css/style.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/public/stylesheets/main.css">
    <link rel="shortcut icon" type="image/png" href="http://i3wm.org/favicon.png">
    <script src="/public/js/jquery-1.9.0.min.js" type="text/javascript" charset="utf-8"></script>
	<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
    
    
      <script src="/public/js/patch.js" type="text/javascript" charset="utf-8"></script>
    
  </head>
  <body>


<div id="main">
	<a href="/"><h1 id="title">i3 - improved tiling WM</h1></a>
				<ul id="nav">
						<li><a style="border-bottom: 2px solid #fff" href="/">Reviews</a></li>
						<li><a href="http://bugs.i3wm.org/">Bugs</a></li>
				</ul>
<br style="clear: both">

<div id="content">

<h1>Remove yajl major version conditionals</h1>
<div style="float: right">
<p>
Patch status: merged
</p>
<p>
Patch by Tony Crisci
</p>
</div>

<p>
<strong>Long description</strong>:<br>
<pre>Yajl version &gt;= 2 is required for building the i3wm.

fixes #1156
</pre>
</p>


<p>
To apply this patch, use:<br>
<code>curl http://cr.i3wm.org/patch/537/raw.patch | git am</code>
</p>




<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/common.mk</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L32">32</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="32">@@ -115,9 &#43;115,6 @@ XCURSOR_LIBS   := $(call ldflags_for_lib, xcb-cursor,xcb-cursor)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L33">33</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="33"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L34">34</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="34"> # yajl</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L35">35</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="35"> YAJL_CFLAGS := $(call cflags_for_lib, yajl)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L36">36</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="36">-# Fallback for libyajl 1 which did not include yajl_version.h. We need</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L37">37</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="37">-# YAJL_MAJOR from that file to decide which code path should be used.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L38">38</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="38">-YAJL_CFLAGS &#43;= -idirafter $(TOPDIR)/yajl-fallback</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L39">39</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="39"> YAJL_LIBS   := $(call ldflags_for_lib, yajl,yajl)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L40">40</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="40"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L41">41</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="41"> #libev</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3-msg/main.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L46">46</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="46">@@ -76,11 &#43;76,7 @@ static int reply_boolean_cb(void *params, int val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L47">47</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="47">     return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L48">48</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="48"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L49">49</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="49"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L50">50</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="50">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L51">51</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="51"> static int reply_string_cb(void *params, const unsigned char *val, size_t len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L52">52</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="52">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L53">53</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="53">-static int reply_string_cb(void *params, const unsigned char *val, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L54">54</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="54">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L55">55</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="55">     char *str = scalloc(len &#43; 1);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L56">56</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="56">     strncpy(str, (const char*)val, len);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L57">57</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="57">     if (strcmp(last_key, &#34;error&#34;) == 0)</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L58">58</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="58">@@ -107,11 &#43;103,7 @@ static int reply_end_map_cb(void *params) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L59">59</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="59"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L60">60</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="60"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L61">61</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="61"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L62">62</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="62">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L63">63</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="63"> static int reply_map_key_cb(void *params, const unsigned char *keyVal, size_t keyLen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L64">64</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="64">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L65">65</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="65">-static int reply_map_key_cb(void *params, const unsigned char *keyVal, unsigned keyLen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L66">66</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="66">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L67">67</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="67">     free(last_key);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L68">68</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="68">     last_key = scalloc(keyLen &#43; 1);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L69">69</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="69">     strncpy(last_key, (const char*)keyVal, keyLen);</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L70">70</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="70">@@ -239,21 &#43;231,12 @@ int main(int argc, char *argv[]) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L71">71</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="71">      * If not, nicely format the error message. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L72">72</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="72">     if (reply_type == I3_IPC_MESSAGE_TYPE_COMMAND) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L73">73</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="73">         yajl_handle handle;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L74">74</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="74">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L75">75</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="75">-        yajl_parser_config parse_conf = { 0, 0 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L76">76</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="76">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L77">77</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="77">-        handle = yajl_alloc(&amp;reply_callbacks, &amp;parse_conf, NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L78">78</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="78">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L79">79</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="79">         handle = yajl_alloc(&amp;reply_callbacks, NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L80">80</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="80">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L81">81</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="81">         yajl_status state = yajl_parse(handle, (const unsigned char*)reply, reply_length);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L82">82</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="82">         switch (state) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L83">83</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="83">             case yajl_status_ok:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L84">84</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="84">                 break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L85">85</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="85">             case yajl_status_client_canceled:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L86">86</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="86">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L87">87</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="87">-            case yajl_status_insufficient_data:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L88">88</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="88">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L89">89</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="89">             case yajl_status_error:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L90">90</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="90">                 errx(EXIT_FAILURE, &#34;IPC: Could not parse JSON reply.&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L91">91</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="91">         }</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/src/child.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L96">96</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="96">@@ -161,11 &#43;161,7 @@ static int stdin_start_map(void *context) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L97">97</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="97">     return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L98">98</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="98"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L99">99</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="99"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L100">100</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="100">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L101">101</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="101"> static int stdin_map_key(void *context, const unsigned char *key, size_t len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L102">102</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="102">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L103">103</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="103">-static int stdin_map_key(void *context, const unsigned char *key, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L104">104</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="104">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L105">105</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="105">     parser_ctx *ctx = context;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L106">106</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="106">     FREE(ctx-&gt;last_map_key);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L107">107</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="107">     sasprintf(&amp;(ctx-&gt;last_map_key), &#34;%.*s&#34;, len, key);</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L108">108</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="108">@@ -183,11 &#43;179,7 @@ static int stdin_boolean(void *context, int val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L109">109</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="109">     return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L110">110</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="110"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L111">111</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="111"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L112">112</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="112">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L113">113</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="113"> static int stdin_string(void *context, const unsigned char *val, size_t len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L114">114</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="114">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L115">115</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="115">-static int stdin_string(void *context, const unsigned char *val, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L116">116</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="116">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L117">117</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="117">     parser_ctx *ctx = context;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L118">118</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="118">     if (strcasecmp(ctx-&gt;last_map_key, &#34;full_text&#34;) == 0) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L119">119</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="119">         ctx-&gt;block.full_text = i3string_from_utf8_with_length((const char *)val, len);</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L120">120</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="120">@@ -223,11 &#43;215,7 @@ static int stdin_string(void *context, const unsigned char *val, unsigned int le</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L121">121</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="121">     return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L122">122</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="122"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L123">123</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="123"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L124">124</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="124">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L125">125</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="125"> static int stdin_integer(void *context, long long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L126">126</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="126">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L127">127</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="127">-static int stdin_integer(void *context, long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L128">128</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="128">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L129">129</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="129">     parser_ctx *ctx = context;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L130">130</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="130">     if (strcasecmp(ctx-&gt;last_map_key, &#34;min_width&#34;) == 0) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L131">131</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="131">         ctx-&gt;block.min_width = (uint32_t)val;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L132">132</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="132">@@ -321,11 &#43;309,7 @@ static void read_flat_input(char *buffer, int length) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L133">133</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="133"> static bool read_json_input(unsigned char *input, int length) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L134">134</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="134">     yajl_status status = yajl_parse(parser, input, length);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L135">135</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="135">     bool has_urgent = false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L136">136</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="136">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L137">137</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="137">     if (status != yajl_status_ok) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L138">138</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="138">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L139">139</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="139">-    if (status != yajl_status_ok &amp;&amp; status != yajl_status_insufficient_data) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L140">140</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="140">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L141">141</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="141">         char *message = (char *)yajl_get_error(parser, 0, input, length);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L142">142</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="142"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L143">143</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="143">         /* strip the newline yajl adds to the error message */</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L144">144</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="144">@@ -429,11 &#43;413,8 @@ void child_sig_cb(struct ev_loop *loop, ev_child *watcher, int revents) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L145">145</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="145"> void child_write_output(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L146">146</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="146">     if (child.click_events) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L147">147</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="147">         const unsigned char *output;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L148">148</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="148">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L149">149</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="149">-        unsigned int size;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L150">150</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="150">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L151">151</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="151">         size_t size;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L152">152</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="152">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L153">153</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="153">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L154">154</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="154">         yajl_gen_get_buf(gen, &amp;output, &amp;size);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L155">155</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="155">         write(child_stdin, output, size);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L156">156</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="156">         write(child_stdin, &#34;\n&#34;, 1);</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L157">157</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="157">@@ -465,17 &#43;446,9 @@ void start_child(char *command) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L158">158</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="158">         .yajl_start_array = stdin_start_array,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L159">159</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="159">         .yajl_end_array = stdin_end_array,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L160">160</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="160">     };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L161">161</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="161">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L162">162</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="162">-    yajl_parser_config parse_conf = { 0, 0 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L163">163</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="163">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L164">164</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="164">-    parser = yajl_alloc(&amp;callbacks, &amp;parse_conf, NULL, (void*)&amp;parser_context);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L165">165</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="165">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L166">166</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="166">-    gen = yajl_gen_alloc(NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L167">167</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="167">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L168">168</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="168">     parser = yajl_alloc(&amp;callbacks, NULL, &amp;parser_context);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L169">169</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="169"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L170">170</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="170">     gen = yajl_gen_alloc(NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L171">171</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="171">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L172">172</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="172"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L173">173</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="173">     int pipe_in[2]; /* pipe we read from */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L174">174</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="174">     int pipe_out[2]; /* pipe we write to */</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/src/config.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L179">179</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="179">@@ -27,11 &#43;27,7 @@ static char *cur_key;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L180">180</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="180">  * Essentially we just save it in cur_key.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L181">181</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="181">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L182">182</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="182">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L183">183</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="183">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L184">184</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="184"> static int config_map_key_cb(void *params_, const unsigned char *keyVal, size_t keyLen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L185">185</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="185">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L186">186</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="186">-static int config_map_key_cb(void *params_, const unsigned char *keyVal, unsigned keyLen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L187">187</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="187">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L188">188</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="188">     FREE(cur_key);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L189">189</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="189"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L190">190</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="190">     cur_key = smalloc(sizeof(unsigned char) * (keyLen &#43; 1));</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L191">191</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="191">@@ -61,11 &#43;57,7 @@ static int config_null_cb(void *params_) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L192">192</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="192">  * Parse a string</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L193">193</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="193">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L194">194</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="194">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L195">195</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="195">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L196">196</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="196"> static int config_string_cb(void *params_, const unsigned char *val, size_t _len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L197">197</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="197">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L198">198</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="198">-static int config_string_cb(void *params_, const unsigned char *val, unsigned int _len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L199">199</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="199">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L200">200</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="200">     int len = (int)_len;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L201">201</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="201">     /* The id and socket_path are ignored, we already know them. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L202">202</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="202">     if (!strcmp(cur_key, &#34;id&#34;) || !strcmp(cur_key, &#34;socket_path&#34;))</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L203">203</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="203">@@ -225,13 &#43;217,7 @@ static yajl_callbacks outputs_callbacks = {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L204">204</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="204"> void parse_config_json(char *json) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L205">205</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="205">     yajl_handle handle;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L206">206</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="206">     yajl_status state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L207">207</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="207">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L208">208</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="208">-    yajl_parser_config parse_conf = { 0, 0 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L209">209</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="209">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L210">210</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="210">-    handle = yajl_alloc(&amp;outputs_callbacks, &amp;parse_conf, NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L211">211</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="211">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L212">212</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="212">     handle = yajl_alloc(&amp;outputs_callbacks, NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L213">213</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="213">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L214">214</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="214"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L215">215</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="215">     state = yajl_parse(handle, (const unsigned char*) json, strlen(json));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L216">216</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="216"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L217">217</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="217">@@ -240,9 &#43;226,6 @@ void parse_config_json(char *json) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L218">218</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="218">         case yajl_status_ok:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L219">219</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="219">             break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L220">220</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="220">         case yajl_status_client_canceled:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L221">221</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="221">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L222">222</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="222">-        case yajl_status_insufficient_data:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L223">223</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="223">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L224">224</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="224">         case yajl_status_error:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L225">225</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="225">             ELOG(&#34;Could not parse config-reply!\n&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L226">226</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="226">             exit(EXIT_FAILURE);</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/src/mode.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L231">231</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="231">@@ -27,11 &#43;27,7 @@ struct mode_json_params {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L232">232</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="232">  * Parse a string (change)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L233">233</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="233">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L234">234</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="234">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L235">235</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="235">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L236">236</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="236"> static int mode_string_cb(void *params_, const unsigned char *val, size_t len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L237">237</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="237">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L238">238</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="238">-static int mode_string_cb(void *params_, const unsigned char *val, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L239">239</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="239">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L240">240</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="240">         struct mode_json_params *params = (struct mode_json_params*) params_;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L241">241</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="241"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L242">242</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="242">         if (!strcmp(params-&gt;cur_key, &#34;change&#34;)) {</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L243">243</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="243">@@ -56,11 &#43;52,7 @@ static int mode_string_cb(void *params_, const unsigned char *val, unsigned int</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L244">244</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="244">  * Essentially we just save it in the parsing-state</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L245">245</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="245">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L246">246</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="246">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L247">247</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="247">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L248">248</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="248"> static int mode_map_key_cb(void *params_, const unsigned char *keyVal, size_t keyLen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L249">249</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="249">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L250">250</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="250">-static int mode_map_key_cb(void *params_, const unsigned char *keyVal, unsigned int keyLen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L251">251</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="251">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L252">252</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="252">     struct mode_json_params *params = (struct mode_json_params*) params_;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L253">253</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="253">     FREE(params-&gt;cur_key);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L254">254</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="254"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L255">255</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="255">@@ -95,13 &#43;87,7 @@ void parse_mode_json(char *json) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L256">256</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="256">     yajl_handle handle;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L257">257</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="257">     yajl_status state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L258">258</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="258"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L259">259</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="259">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L260">260</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="260">-    yajl_parser_config parse_conf = { 0, 0 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L261">261</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="261">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L262">262</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="262">-    handle = yajl_alloc(&amp;mode_callbacks, &amp;parse_conf, NULL, (void*) &amp;params);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L263">263</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="263">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L264">264</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="264">     handle = yajl_alloc(&amp;mode_callbacks, NULL, (void*) &amp;params);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L265">265</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="265">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L266">266</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="266"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L267">267</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="267">     state = yajl_parse(handle, (const unsigned char*) json, strlen(json));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L268">268</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="268"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L269">269</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="269">@@ -110,9 &#43;96,6 @@ void parse_mode_json(char *json) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L270">270</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="270">         case yajl_status_ok:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L271">271</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="271">             break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L272">272</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="272">         case yajl_status_client_canceled:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L273">273</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="273">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L274">274</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="274">-        case yajl_status_insufficient_data:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L275">275</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="275">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L276">276</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="276">         case yajl_status_error:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L277">277</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="277">             ELOG(&#34;Could not parse mode-event!\n&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L278">278</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="278">             exit(EXIT_FAILURE);</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/src/outputs.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L283">283</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="283">@@ -64,11 &#43;64,7 @@ static int outputs_boolean_cb(void *params_, int val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L284">284</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="284">  * Parse an integer (current_workspace or the rect)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L285">285</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="285">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L286">286</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="286">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L287">287</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="287">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L288">288</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="288"> static int outputs_integer_cb(void *params_, long long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L289">289</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="289">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L290">290</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="290">-static int outputs_integer_cb(void *params_, long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L291">291</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="291">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L292">292</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="292">     struct outputs_json_params *params = (struct outputs_json_params*) params_;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L293">293</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="293"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L294">294</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="294">     if (!strcmp(params-&gt;cur_key, &#34;current_workspace&#34;)) {</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L295">295</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="295">@@ -108,11 &#43;104,7 @@ static int outputs_integer_cb(void *params_, long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L296">296</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="296">  * Parse a string (name)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L297">297</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="297">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L298">298</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="298">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L299">299</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="299">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L300">300</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="300"> static int outputs_string_cb(void *params_, const unsigned char *val, size_t len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L301">301</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="301">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L302">302</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="302">-static int outputs_string_cb(void *params_, const unsigned char *val, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L303">303</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="303">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L304">304</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="304">     struct outputs_json_params *params = (struct outputs_json_params*) params_;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L305">305</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="305"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L306">306</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="306">     if (!strcmp(params-&gt;cur_key, &#34;current_workspace&#34;)) {</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L307">307</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="307">@@ -232,11 &#43;224,7 @@ static int outputs_end_map_cb(void *params_) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L308">308</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="308">  * Essentially we just save it in the parsing-state</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L309">309</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="309">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L310">310</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="310">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L311">311</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="311">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L312">312</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="312"> static int outputs_map_key_cb(void *params_, const unsigned char *keyVal, size_t keyLen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L313">313</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="313">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L314">314</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="314">-static int outputs_map_key_cb(void *params_, const unsigned char *keyVal, unsigned keyLen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L315">315</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="315">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L316">316</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="316">     struct outputs_json_params *params = (struct outputs_json_params*) params_;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L317">317</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="317">     FREE(params-&gt;cur_key);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L318">318</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="318"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L319">319</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="319">@@ -281,13 &#43;269,7 @@ void parse_outputs_json(char *json) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L320">320</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="320"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L321">321</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="321">     yajl_handle handle;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L322">322</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="322">     yajl_status state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L323">323</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="323">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L324">324</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="324">-    yajl_parser_config parse_conf = { 0, 0 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L325">325</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="325">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L326">326</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="326">-    handle = yajl_alloc(&amp;outputs_callbacks, &amp;parse_conf, NULL, (void*) &amp;params);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L327">327</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="327">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L328">328</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="328">     handle = yajl_alloc(&amp;outputs_callbacks, NULL, (void*) &amp;params);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L329">329</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="329">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L330">330</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="330"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L331">331</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="331">     state = yajl_parse(handle, (const unsigned char*) json, strlen(json));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L332">332</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="332"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L333">333</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="333">@@ -296,9 &#43;278,6 @@ void parse_outputs_json(char *json) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L334">334</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="334">         case yajl_status_ok:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L335">335</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="335">             break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L336">336</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="336">         case yajl_status_client_canceled:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L337">337</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="337">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L338">338</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="338">-        case yajl_status_insufficient_data:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L339">339</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="339">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L340">340</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="340">         case yajl_status_error:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L341">341</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="341">             ELOG(&#34;Could not parse outputs-reply!\n&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L342">342</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="342">             exit(EXIT_FAILURE);</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/src/parse_json_header.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L347">347</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="347">@@ -35,11 &#43;35,7 @@ static enum {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L348">348</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="348">     NO_KEY</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L349">349</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="349"> } current_key;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L350">350</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="350"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L351">351</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="351">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L352">352</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="352"> static int header_integer(void *ctx, long long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L353">353</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="353">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L354">354</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="354">-static int header_integer(void *ctx, long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L355">355</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="355">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L356">356</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="356">     i3bar_child *child = ctx;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L357">357</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="357"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L358">358</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="358">     switch (current_key) {</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L359">359</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="359">@@ -76,11 &#43;72,7 @@ static int header_boolean(void *ctx, int val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L360">360</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="360"> #define CHECK_KEY(name) (stringlen == strlen(name) &amp;&amp; \</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L361">361</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="361">                          STARTS_WITH((const char*)stringval, stringlen, name))</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L362">362</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="362"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L363">363</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="363">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L364">364</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="364"> static int header_map_key(void *ctx, const unsigned char *stringval, size_t stringlen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L365">365</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="365">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L366">366</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="366">-static int header_map_key(void *ctx, const unsigned char *stringval, unsigned int stringlen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L367">367</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="367">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L368">368</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="368">     if (CHECK_KEY(&#34;version&#34;)) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L369">369</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="369">         current_key = KEY_VERSION;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L370">370</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="370">     } else if (CHECK_KEY(&#34;stop_signal&#34;)) {</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L371">371</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="371">@@ -118,16 &#43;110,10 @@ void parse_json_header(i3bar_child *child, const unsigned char *buffer, int leng</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L372">372</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="372"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L373">373</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="373">     current_key = NO_KEY;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L374">374</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="374"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L375">375</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="375">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L376">376</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="376">     yajl_handle handle = yajl_alloc(&amp;version_callbacks, NULL, child);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L377">377</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="377">     /* Allow trailing garbage. yajl 1 always behaves that way anyways, but for</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L378">378</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="378">      * yajl 2, we need to be explicit. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L379">379</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="379">     yajl_config(handle, yajl_allow_trailing_garbage, 1);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L380">380</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="380">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L381">381</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="381">-    yajl_parser_config parse_conf = { 0, 0 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L382">382</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="382">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L383">383</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="383">-    yajl_handle handle = yajl_alloc(&amp;version_callbacks, &amp;parse_conf, NULL, child);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L384">384</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="384">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L385">385</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="385"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L386">386</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="386">     yajl_status state = yajl_parse(handle, buffer, length);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L387">387</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="387">     if (state != yajl_status_ok) {</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/src/workspaces.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L392">392</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="392">@@ -58,11 &#43;58,7 @@ static int workspaces_boolean_cb(void *params_, int val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L393">393</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="393">  * Parse an integer (num or the rect)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L394">394</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="394">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L395">395</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="395">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L396">396</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="396">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L397">397</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="397"> static int workspaces_integer_cb(void *params_, long long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L398">398</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="398">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L399">399</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="399">-static int workspaces_integer_cb(void *params_, long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L400">400</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="400">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L401">401</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="401">     struct workspaces_json_params *params = (struct workspaces_json_params*) params_;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L402">402</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="402"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L403">403</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="403">     if (!strcmp(params-&gt;cur_key, &#34;num&#34;)) {</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L404">404</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="404">@@ -103,11 &#43;99,7 @@ static int workspaces_integer_cb(void *params_, long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L405">405</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="405">  * Parse a string (name, output)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L406">406</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="406">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L407">407</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="407">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L408">408</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="408">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L409">409</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="409"> static int workspaces_string_cb(void *params_, const unsigned char *val, size_t len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L410">410</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="410">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L411">411</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="411">-static int workspaces_string_cb(void *params_, const unsigned char *val, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L412">412</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="412">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L413">413</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="413">         struct workspaces_json_params *params = (struct workspaces_json_params*) params_;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L414">414</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="414"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L415">415</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="415">         char *output_name;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L416">416</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="416">@@ -182,11 &#43;174,7 @@ static int workspaces_start_map_cb(void *params_) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L417">417</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="417">  * Essentially we just save it in the parsing-state</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L418">418</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="418">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L419">419</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="419">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L420">420</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="420">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L421">421</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="421"> static int workspaces_map_key_cb(void *params_, const unsigned char *keyVal, size_t keyLen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L422">422</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="422">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L423">423</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="423">-static int workspaces_map_key_cb(void *params_, const unsigned char *keyVal, unsigned int keyLen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L424">424</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="424">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L425">425</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="425">     struct workspaces_json_params *params = (struct workspaces_json_params*) params_;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L426">426</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="426">     FREE(params-&gt;cur_key);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L427">427</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="427"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L428">428</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="428">@@ -223,13 &#43;211,7 @@ void parse_workspaces_json(char *json) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L429">429</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="429"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L430">430</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="430">     yajl_handle handle;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L431">431</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="431">     yajl_status state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L432">432</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="432">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L433">433</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="433">-    yajl_parser_config parse_conf = { 0, 0 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L434">434</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="434">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L435">435</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="435">-    handle = yajl_alloc(&amp;workspaces_callbacks, &amp;parse_conf, NULL, (void*) &amp;params);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L436">436</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="436">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L437">437</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="437">     handle = yajl_alloc(&amp;workspaces_callbacks, NULL, (void*) &amp;params);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L438">438</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="438">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L439">439</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="439"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L440">440</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="440">     state = yajl_parse(handle, (const unsigned char*) json, strlen(json));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L441">441</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="441"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L442">442</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="442">@@ -238,9 &#43;220,6 @@ void parse_workspaces_json(char *json) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L443">443</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="443">         case yajl_status_ok:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L444">444</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="444">             break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L445">445</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="445">         case yajl_status_client_canceled:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L446">446</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="446">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L447">447</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="447">-        case yajl_status_insufficient_data:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L448">448</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="448">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L449">449</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="449">         case yajl_status_error:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L450">450</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="450">             ELOG(&#34;Could not parse workspaces-reply!\n&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L451">451</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="451">             exit(EXIT_FAILURE);</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/yajl_utils.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L456">456</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="456">@@ -17,12 &#43;17,6 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L457">457</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="457"> #define y(x, ...) yajl_gen_ ## x (gen, ##__VA_ARGS__)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L458">458</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="458"> #define ystr(str) yajl_gen_string(gen, (unsigned char*)str, strlen(str))</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L459">459</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="459"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L460">460</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="460">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L461">461</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="461"> #define ygenalloc() yajl_gen_alloc(NULL)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L462">462</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="462"> #define yalloc(callbacks, client) yajl_alloc(callbacks, NULL, client)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L463">463</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="463"> typedef size_t ylength;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L464">464</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="464">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L465">465</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="465">-#define ygenalloc() yajl_gen_alloc(NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L466">466</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="466">-#define yalloc(callbacks, client) yajl_alloc(callbacks, NULL, NULL, client)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L467">467</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="467">-typedef unsigned int ylength;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L468">468</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="468">-#endif</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/commands_parser.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L473">473</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="473">@@ -209,12 &#43;209,8 @@ struct CommandResult *parse_command(const char *input) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L474">474</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="474">     DLOG(&#34;COMMAND: *%s*\n&#34;, input);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L475">475</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="475">     state = INITIAL;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L476">476</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="476"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L477">477</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="477">-/* A YAJL JSON generator used for formatting replies. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L478">478</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="478">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L479">479</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="479">&#43;    /* A YAJL JSON generator used for formatting replies. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L480">480</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="480">     command_output.json_gen = yajl_gen_alloc(NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L481">481</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="481">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L482">482</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="482">-    command_output.json_gen = yajl_gen_alloc(NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L483">483</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="483">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L484">484</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="484"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L485">485</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="485">     y(array_open);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L486">486</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="486">     command_output.needs_tree_render = false;</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/config_parser.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L491">491</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="491">@@ -323,12 &#43;323,8 @@ struct ConfigResult *parse_config(const char *input, struct context *context) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L492">492</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="492">     state = INITIAL;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L493">493</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="493">     statelist_idx = 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L494">494</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="494"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L495">495</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="495">-/* A YAJL JSON generator used for formatting replies. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L496">496</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="496">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L497">497</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="497">&#43;    /* A YAJL JSON generator used for formatting replies. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L498">498</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="498">     command_output.json_gen = yajl_gen_alloc(NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L499">499</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="499">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L500">500</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="500">-    command_output.json_gen = yajl_gen_alloc(NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L501">501</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="501">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L502">502</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="502"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L503">503</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="503">     y(array_open);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L504">504</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="504"> </pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/display_version.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L509">509</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="509">@@ -21,21 &#43;21,13 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L510">510</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="510"> static bool human_readable_key;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L511">511</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="511"> static char *human_readable_version;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L512">512</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="512"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L513">513</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="513">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L514">514</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="514"> static int version_string(void *ctx, const unsigned char *val, size_t len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L515">515</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="515">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L516">516</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="516">-static int version_string(void *ctx, const unsigned char *val, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L517">517</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="517">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L518">518</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="518">     if (human_readable_key)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L519">519</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="519">         sasprintf(&amp;human_readable_version, &#34;%.*s&#34;, (int)len, val);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L520">520</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="520">     return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L521">521</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="521"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L522">522</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="522"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L523">523</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="523">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L524">524</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="524"> static int version_map_key(void *ctx, const unsigned char *stringval, size_t stringlen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L525">525</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="525">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L526">526</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="526">-static int version_map_key(void *ctx, const unsigned char *stringval, unsigned int stringlen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L527">527</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="527">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L528">528</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="528">     human_readable_key = (stringlen == strlen(&#34;human_readable&#34;) &amp;&amp;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L529">529</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="529">                    strncmp((const char*)stringval, &#34;human_readable&#34;, strlen(&#34;human_readable&#34;)) == 0);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L530">530</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="530">     return 1;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L531">531</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="531">@@ -104,13 &#43;96,7 @@ void display_running_version(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L532">532</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="532">     if (reply_type != I3_IPC_MESSAGE_TYPE_GET_VERSION)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L533">533</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="533">         errx(EXIT_FAILURE, &#34;Got reply type %d, but expected %d (GET_VERSION)&#34;, reply_type, I3_IPC_MESSAGE_TYPE_GET_VERSION);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L534">534</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="534"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L535">535</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="535">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L536">536</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="536">     yajl_handle handle = yajl_alloc(&amp;version_callbacks, NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L537">537</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="537">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L538">538</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="538">-    yajl_parser_config parse_conf = { 0, 0 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L539">539</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="539">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L540">540</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="540">-    yajl_handle handle = yajl_alloc(&amp;version_callbacks, &amp;parse_conf, NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L541">541</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="541">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L542">542</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="542"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L543">543</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="543">     yajl_status state = yajl_parse(handle, (const unsigned char*)reply, (int)reply_length);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L544">544</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="544">     if (state != yajl_status_ok)</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/key_press.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L549">549</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="549">@@ -30,11 &#43;30,7 @@ static int json_boolean(void *ctx, int boolval) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L550">550</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="550">     return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L551">551</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="551"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L552">552</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="552"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L553">553</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="553">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L554">554</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="554"> static int json_map_key(void *ctx, const unsigned char *stringval, size_t stringlen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L555">555</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="555">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L556">556</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="556">-static int json_map_key(void *ctx, const unsigned char *stringval, unsigned int stringlen) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L557">557</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="557">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L558">558</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="558">     parse_error_key = (stringlen &gt;= strlen(&#34;parse_error&#34;) &amp;&amp;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L559">559</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="559">                        strncmp((const char*)stringval, &#34;parse_error&#34;, strlen(&#34;parse_error&#34;)) == 0);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L560">560</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="560">     return 1;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L561">561</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="561">@@ -86,15 &#43;82,8 @@ void handle_key_press(xcb_key_press_event_t *event) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L562">562</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="562">     /* We parse the JSON reply to figure out whether there was an error</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L563">563</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="563">      * (&#34;success&#34; being false in on of the returned dictionaries). */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L564">564</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="564">     const unsigned char *reply;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L565">565</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="565">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L566">566</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="566">     size_t length;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L567">567</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="567">     yajl_handle handle = yajl_alloc(&amp;command_error_callbacks, NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L568">568</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="568">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L569">569</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="569">-    unsigned int length;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L570">570</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="570">-    yajl_parser_config parse_conf = { 0, 0 };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L571">571</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="571">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L572">572</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="572">-    yajl_handle handle = yajl_alloc(&amp;command_error_callbacks, &amp;parse_conf, NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L573">573</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="573">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L574">574</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="574">     yajl_gen_get_buf(command_output-&gt;json_gen, &amp;reply, &amp;length);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L575">575</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="575"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L576">576</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="576">     current_nesting_level = 0;</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/load_layout.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L581">581</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="581">@@ -133,11 &#43;133,7 @@ static int json_end_array(void *ctx) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L582">582</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="582">     return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L583">583</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="583"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L584">584</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="584"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L585">585</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="585">-#if YAJL_MAJOR &lt; 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L586">586</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="586">-static int json_key(void *ctx, const unsigned char *val, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L587">587</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="587">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L588">588</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="588"> static int json_key(void *ctx, const unsigned char *val, size_t len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L589">589</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="589">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L590">590</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="590">     LOG(&#34;key: %.*s\n&#34;, (int)len, val);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L591">591</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="591">     FREE(last_key);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L592">592</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="592">     last_key = scalloc((len&#43;1) * sizeof(char));</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L593">593</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="593">@@ -160,11 &#43;156,7 @@ static int json_key(void *ctx, const unsigned char *val, size_t len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L594">594</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="594">     return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L595">595</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="595"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L596">596</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="596"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L597">597</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="597">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L598">598</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="598"> static int json_string(void *ctx, const unsigned char *val, size_t len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L599">599</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="599">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L600">600</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="600">-static int json_string(void *ctx, const unsigned char *val, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L601">601</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="601">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L602">602</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="602">     LOG(&#34;string: %.*s for key %s\n&#34;, (int)len, val, last_key);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L603">603</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="603">     if (parsing_swallows) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L604">604</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="604">         char *sval;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L605">605</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="605">@@ -307,13 &#43;299,8 @@ static int json_string(void *ctx, const unsigned char *val, unsigned int len) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L606">606</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="606">     return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L607">607</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="607"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L608">608</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="608"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L609">609</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="609">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L610">610</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="610"> static int json_int(void *ctx, long long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L611">611</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="611">     LOG(&#34;int %lld for key %s\n&#34;, val, last_key);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L612">612</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="612">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L613">613</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="613">-static int json_int(void *ctx, long val) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L614">614</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="614">-    LOG(&#34;int %ld for key %s\n&#34;, val, last_key);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L615">615</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="615">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L616">616</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="616">     /* For backwards compatibility with i3 &lt; 4.8 */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L617">617</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="617">     if (strcasecmp(last_key, &#34;type&#34;) == 0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L618">618</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="618">         json_node-&gt;type = val;</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L619">619</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="619">@@ -427,13 &#43;414,8 @@ void tree_append_json(Con *con, const char *filename, char **errormsg) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L620">620</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="620">         .yajl_end_map = json_end_map,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L621">621</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="621">         .yajl_end_array = json_end_array,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L622">622</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="622">     };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L623">623</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="623">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L624">624</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="624">     g = yajl_gen_alloc(NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L625">625</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="625">     hand = yajl_alloc(&amp;callbacks, NULL, (void*)g);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L626">626</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="626">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L627">627</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="627">-    g = yajl_gen_alloc(NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L628">628</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="628">-    hand = yajl_alloc(&amp;callbacks, NULL, NULL, (void*)g);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L629">629</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="629">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L630">630</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="630">     /* Allowing comments allows for more user-friendly layout files. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L631">631</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="631">     yajl_config(hand, yajl_allow_comments, true);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L632">632</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="632">     /* Allow multiple values, i.e. multiple nodes to attach */</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L633">633</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="633">@@ -463,11 &#43;445,7 @@ void tree_append_json(Con *con, const char *filename, char **errormsg) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L634">634</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="634">     con_fix_percent(con);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L635">635</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="635"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L636">636</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="636">     setlocale(LC_NUMERIC, &#34;&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L637">637</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="637">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L638">638</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="638">     yajl_complete_parse(hand);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L639">639</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="639">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L640">640</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="640">-    yajl_parse_complete(hand);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L641">641</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="641">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L642">642</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="642"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L643">643</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="643">     fclose(f);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L644">644</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="644">     if (to_focus)</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/util.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L649">649</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="649">@@ -188,22 &#43;188,14 @@ static char **append_argument(char **original, char *argument) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L650">650</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="650"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L651">651</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="651"> char *store_restart_layout(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L652">652</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="652">     setlocale(LC_NUMERIC, &#34;C&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L653">653</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="653">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L654">654</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="654">     yajl_gen gen = yajl_gen_alloc(NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L655">655</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="655">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L656">656</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="656">-    yajl_gen gen = yajl_gen_alloc(NULL, NULL);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L657">657</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="657">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L658">658</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="658"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L659">659</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="659">     dump_node(gen, croot, true);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L660">660</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="660"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L661">661</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="661">     setlocale(LC_NUMERIC, &#34;&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L662">662</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="662"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L663">663</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="663">     const unsigned char *payload;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L664">664</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="664">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L665">665</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="665">     size_t length;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L666">666</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="666">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L667">667</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="667">-    unsigned int length;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L668">668</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="668">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L669">669</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="669">     y(get_buf, &amp;payload, &amp;length);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L670">670</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="670"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L671">671</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="671">     /* create a temporary file if one hasn&#39;t been specified, or just</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L672">672</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="672">@@ -241,11 &#43;233,7 @@ char *store_restart_layout(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L673">673</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="673">             return NULL;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L674">674</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="674">         }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L675">675</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="675">         written &#43;= n;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L676">676</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="676">-#if YAJL_MAJOR &gt;= 2</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L677">677</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="677">         DLOG(&#34;written: %zd of %zd\n&#34;, written, length);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L678">678</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="678">-#else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L679">679</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="679">-        DLOG(&#34;written: %d of %d\n&#34;, written, length);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L680">680</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="680">-#endif</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L681">681</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="681">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L682">682</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="682">     close(fd);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L683">683</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="683"> </pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">/dev/null</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L689">689</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="689">@@ -1,7 &#43;0,0 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L690">690</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="690">-#ifndef YAJL_VERSION_H_</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L691">691</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="691">-#define YAJL_VERSION_H_</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L692">692</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="692">-/* Fallback for libyajl 1 which does not provide yajl_version.h */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L693">693</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="693">-#define YAJL_MAJOR 1</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L694">694</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="694">-#define YAJL_MINOR 0</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L695">695</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="695">-#define YAJL_MICRO 0</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L696">696</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="696">-#endif</pre>
  </td>
  </tr>


</table>
</div>


</div>

  </body>
</html>

