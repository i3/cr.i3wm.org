
<!DOCTYPE html>
<html>
  <head>
    <title>i3 Patch: introduced i3 command for showing/hiding/toggling i3bar</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" media="screen" href="http://i3wm.org/css/style.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/public/stylesheets/main.css">
    <link rel="shortcut icon" type="image/png" href="http://i3wm.org/favicon.png">
    <script src="/public/js/jquery-1.9.0.min.js" type="text/javascript" charset="utf-8"></script>
	<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
    
    
      <script src="/public/js/patch.js" type="text/javascript" charset="utf-8"></script>
    
  </head>
  <body>


<div id="main">
	<a href="/"><h1 id="title">i3 - improved tiling WM</h1></a>
				<ul id="nav">
						<li><a style="border-bottom: 2px solid #fff" href="/">Reviews</a></li>
						<li><a href="http://bugs.i3wm.org/">Bugs</a></li>
				</ul>
<br style="clear: both">

<div id="content">

<h1>introduced i3 command for showing/hiding/toggling i3bar</h1>
<div style="float: right">
<p>
Patch status: superseded
</p>
<p>
Patch by jj
</p>
</div>

<p>
<strong>Long description</strong>:<br>
<pre>The state of each i3bar instance can now be controlled from within i3.
Therefore, a new i3 command was introduced, which only affects bars in mode &#34;hide&#34;:
    bar [&lt;bar_id&gt;] show|hide|forcehide|toggle

    show: always show the bar
    hide: normal hide mode
    forcehide: always hide the bar
    toggle: toggle between show and hide (individually for each bar)

This patch introduces a state (&#34;state hide|show|forcehide&#34;) in the barconfig, which 
indicates the current state of each i3bar instance. In order to change the state of the 
bar from i3, a barconfig-update event was introduced, for which a bar can subsribe and 
the bar then gets notified about a state change in its barconfig.

For convenience, an id field (&#34;id &lt;bar_id&gt;&#34;) was added to the barconfig, where one can 
set the desired id for the corresponding bar. If the id is not specified, i3 will 
deterministically choose an id; otherwise, with the previous random approach for finding
a new id, which is actually not shared with i3bar, as it would determine its id on 
startup, the event-subscription would be destroyed on reload. Still, this issue remains
when manually changing the bar_id in the config and then reloading.

fixes #833

</pre>
</p>


<p>
To apply this patch, use:<br>
<code>curl http://cr.i3wm.org/patch/138/raw.patch | git am</code>
</p>




<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/include/config.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L49">49</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="49">@@ -31,6 &#43;31,18 @@ typedef struct config_t {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L50">50</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="50">     char         *tray_output;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L51">51</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="51">     int          num_outputs;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L52">52</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="52">     char         **outputs;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L53">53</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="53">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L54">54</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="54">&#43;    /* The current state of the bar, which indicates whether it is hidden/shown/forcehidden */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L55">55</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="55">&#43;    enum {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L56">56</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="56">&#43;        /* bar is hidden, but can be unhidden by the bar modifier or urgency hints, etc. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L57">57</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="57">&#43;        S_HIDE = 0,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L58">58</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="58">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L59">59</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="59">&#43;        /* always show the bar */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L60">60</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="60">&#43;        S_SHOW = 1,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L61">61</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="61">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L62">62</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="62">&#43;        /* always hide the bar */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L63">63</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="63">&#43;        S_FORCEHIDE = 2,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L64">64</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="64">&#43;    } state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L65">65</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="65"> } config_t;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L66">66</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="66"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L67">67</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="67"> config_t config;</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/src/config.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L72">72</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="72">@@ -77,6 &#43;77,14 @@ static int config_string_cb(void *params_, const unsigned char *val, unsigned in</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L73">73</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="73">         return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L74">74</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="74">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L75">75</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="75"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L76">76</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="76">&#43;    if (!strcmp(cur_key, &#34;state&#34;)) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L77">77</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="77">&#43;        DLOG(&#34;state = %.*s, len = %d\n&#34;, len, val, len);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L78">78</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="78">&#43;        config.state = (len == 4 &amp;&amp; !strncmp((const char*)val, &#34;hide&#34;, strlen(&#34;hide&#34;)) ? S_HIDE</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L79">79</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="79">&#43;                        : (len == 4 &amp;&amp; !strncmp((const char*)val, &#34;show&#34;, strlen(&#34;show&#34;)) ? S_SHOW</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L80">80</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="80">&#43;                            : S_FORCEHIDE));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L81">81</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="81">&#43;        return 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L82">82</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="82">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L83">83</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="83">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L84">84</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="84">     if (!strcmp(cur_key, &#34;modifier&#34;)) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L85">85</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="85">         DLOG(&#34;modifier = %.*s\n&#34;, len, val);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L86">86</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="86">         if (len == 5 &amp;&amp; !strncmp((const char*)val, &#34;shift&#34;, strlen(&#34;shift&#34;))) {</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/src/ipc.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L91">91</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="91">@@ -107,6 &#43;107,16 @@ void got_bar_config(char *reply) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L92">92</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="92">     FREE(config.command);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L93">93</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="93"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L94">94</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="94"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L95">95</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="95">&#43;/*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L96">96</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="96">&#43; * Called when we get a configuration update for our bar instance</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L97">97</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="97">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L98">98</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="98">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L99">99</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="99">&#43;void got_bar_config_update(char *reply) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L100">100</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="100">&#43;    DLOG(&#34;Received bar config update \&#34;%s\&#34;\n&#34;, reply);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L101">101</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="101">&#43;    parse_config_json(reply);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L102">102</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="102">&#43;    draw_bars(false);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L103">103</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="103">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L104">104</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="104">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L105">105</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="105"> /* Data-structure to easily call the reply-handlers later */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L106">106</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="106"> handler_t reply_handlers[] = {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L107">107</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="107">     &amp;got_command_reply,</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L108">108</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="108">@@ -154,7 &#43;164,9 @@ void got_mode_event(char *event) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L109">109</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="109"> handler_t event_handlers[] = {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L110">110</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="110">     &amp;got_workspace_event,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L111">111</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="111">     &amp;got_output_event,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L112">112</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="112">-    &amp;got_mode_event</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L113">113</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="113">&#43;    &amp;got_mode_event,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L114">114</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="114">&#43;    NULL,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L115">115</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="115">&#43;    &amp;got_bar_config_update,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L116">116</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="116"> };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L117">117</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="117"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L118">118</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="118"> /*</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L119">119</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="119">@@ -309,9 &#43;321,12 @@ void destroy_connection(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L120">120</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="120">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L121">121</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="121">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L122">122</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="122"> void subscribe_events(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L123">123</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="123">&#43;    char *events;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L124">124</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="124">     if (config.disable_ws) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L125">125</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="125">-        i3_send_msg(I3_IPC_MESSAGE_TYPE_SUBSCRIBE, &#34;[ \&#34;output\&#34;, \&#34;mode\&#34; ]&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L126">126</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="126">&#43;        sasprintf(&amp;events, &#34;[ \&#34;output\&#34;, \&#34;mode\&#34;, \&#34;barconfig_update_%s\&#34; ]&#34;, config.bar_id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L127">127</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="127">     } else {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L128">128</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="128">-        i3_send_msg(I3_IPC_MESSAGE_TYPE_SUBSCRIBE, &#34;[ \&#34;workspace\&#34;, \&#34;output\&#34;, \&#34;mode\&#34; ]&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L129">129</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="129">&#43;        sasprintf(&amp;events, &#34;[ \&#34;workspace\&#34;, \&#34;output\&#34;, \&#34;mode\&#34;, \&#34;barconfig_update_%s\&#34; ]&#34;, config.bar_id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L130">130</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="130">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L131">131</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="131">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L132">132</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="132">&#43;    i3_send_msg(I3_IPC_MESSAGE_TYPE_SUBSCRIBE, events);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L133">133</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="133"> }</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/i3bar/src/xcb.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L138">138</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="138">@@ -198,7 &#43;198,7 @@ void refresh_statusline(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L139">139</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="139">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L140">140</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="140">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L141">141</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="141"> void hide_bars(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L142">142</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="142">-    if (!config.hide_on_modifier) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L143">143</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="143">&#43;    if (!config.hide_on_modifier || config.state == S_SHOW) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L144">144</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="144">         return;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L145">145</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="145">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L146">146</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="146"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L147">147</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="147">@@ -217,7 &#43;217,7 @@ void hide_bars(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L148">148</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="148">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L149">149</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="149">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L150">150</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="150"> void unhide_bars(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L151">151</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="151">-    if (!config.hide_on_modifier) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L152">152</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="152">&#43;    if (!config.hide_on_modifier || config.state == S_FORCEHIDE) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L153">153</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="153">         return;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L154">154</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="154">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L155">155</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="155"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L156">156</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="156">@@ -1716,6 &#43;1716,9 @@ void draw_bars(bool unhide) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L157">157</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="157">         i = 0;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L158">158</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="158">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L159">159</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="159"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L160">160</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="160">&#43;    /* Assure the bar is unhidden when configured to always show */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L161">161</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="161">&#43;    unhide |= config.state == S_SHOW;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L162">162</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="162">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L163">163</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="163">     if (!mod_pressed) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L164">164</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="164">         if (unhide) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L165">165</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="165">             /* The urgent-hint should get noticed, so we unhide the bars shortly */</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/commands.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L170">170</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="170">@@ -265,4 &#43;265,10 @@ void cmd_scratchpad_show(I3_CMD);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L171">171</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="171">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L172">172</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="172"> void cmd_rename_workspace(I3_CMD, char *old_name, char *new_name);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L173">173</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="173"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L174">174</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="174">&#43;/**</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L175">175</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="175">&#43; * Implementation of &#39;bar [&lt;bar_id&gt;] hide|show|forcehide&#39;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L176">176</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="176">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L177">177</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="177">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L178">178</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="178">&#43;void cmd_bar(I3_CMD, char* bar_id, char *state_str);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L179">179</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="179">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L180">180</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="180"> #endif</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/config.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L185">185</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="185">@@ -199,6 &#43;199,9 @@ struct Config {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L186">186</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="186">         /* just ignore the popup, that is, don’t map it */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L187">187</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="187">         PDF_IGNORE = 2,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L188">188</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="188">     } popup_during_fullscreen;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L189">189</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="189">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L190">190</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="190">&#43;    /* The number of currently parsed barconfigs */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L191">191</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="191">&#43;    int number_barconfigs;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L192">192</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="192"> };</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L193">193</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="193"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L194">194</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="194"> /**</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L195">195</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="195">@@ -229,6 &#43;232,18 @@ struct Barconfig {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L196">196</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="196">     /** Bar display mode (hide unless modifier is pressed or show in dock mode) */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L197">197</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="197">     enum { M_DOCK = 0, M_HIDE = 1 } mode;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L198">198</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="198"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L199">199</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="199">&#43;    /* The current state of the bar, which indicates whether it is hidden/shown/forcehidden */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L200">200</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="200">&#43;    enum {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L201">201</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="201">&#43;        /* bar is hidden, but can be unhidden by the bar modifier or urgency hints, etc. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L202">202</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="202">&#43;        S_HIDE = 0,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L203">203</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="203">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L204">204</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="204">&#43;        /* always show the bar */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L205">205</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="205">&#43;        S_SHOW = 1,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L206">206</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="206">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L207">207</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="207">&#43;        /* always hide the bar */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L208">208</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="208">&#43;        S_FORCEHIDE = 2,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L209">209</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="209">&#43;    } state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L210">210</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="210">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L211">211</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="211">     /** Bar modifier (to show bar when in hide mode). */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L212">212</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="212">     enum {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L213">213</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="213">         M_NONE = 0,</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L214">214</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="214">@@ -323,6 &#43;338,18 @@ void grab_all_keys(xcb_connection_t *conn, bool bind_mode_switch);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L215">215</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="215">  */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L216">216</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="216"> void switch_mode(const char *new_mode);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L217">217</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="217"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L218">218</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="218">&#43;/*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L219">219</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="219">&#43; * Sends a bar state update to the barconfig listener with the corresponding bar_id</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L220">220</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="220">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L221">221</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="221">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L222">222</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="222">&#43;void update_barconfig_state(char* bar_id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L223">223</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="223">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L224">224</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="224">&#43;/*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L225">225</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="225">&#43; * Sends a bar state update to all barconfig listeners</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L226">226</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="226">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L227">227</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="227">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L228">228</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="228">&#43;void update_barconfig_state_all();</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L229">229</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="229">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L230">230</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="230"> /**</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L231">231</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="231">  * Returns a pointer to the Binding with the specified modifiers and keycode</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L232">232</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="232">  * or NULL if no such binding exists.</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/config_directives.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L237">237</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="237">@@ -62,6 &#43;62,8 @@ CFGFUN(mode_binding, const char *bindtype, const char *modifiers, const char *ke</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L238">238</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="238"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L239">239</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="239"> CFGFUN(bar_font, const char *font);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L240">240</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="240"> CFGFUN(bar_mode, const char *mode);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L241">241</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="241">&#43;CFGFUN(bar_state, const char *state);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L242">242</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="242">&#43;CFGFUN(bar_id, const char *bar_id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L243">243</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="243"> CFGFUN(bar_output, const char *output);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L244">244</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="244"> CFGFUN(bar_verbose, const char *verbose);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L245">245</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="245"> CFGFUN(bar_modifier, const char *modifier);</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/i3/ipc.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L250">250</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="250">@@ -99,4 &#43;99,7 @@ typedef struct i3_ipc_header {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L251">251</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="251"> /* The window event will be triggered upon window changes */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L252">252</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="252"> #define I3_IPC_EVENT_WINDOW                     (I3_IPC_EVENT_MASK | 3)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L253">253</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="253"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L254">254</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="254">&#43;/** Bar config update will be triggered to update the bar config */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L255">255</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="255">&#43;#define I3_IPC_EVENT_BARCONFIG_UPDATE           (I3_IPC_EVENT_MASK | 4)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L256">256</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="256">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L257">257</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="257"> #endif</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/parser-specs/commands.spec</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L262">262</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="262">@@ -35,6 &#43;35,7 @@ state INITIAL:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L263">263</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="263">   &#39;nop&#39; -&gt; NOP</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L264">264</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="264">   &#39;scratchpad&#39; -&gt; SCRATCHPAD</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L265">265</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="265">   &#39;mode&#39; -&gt; MODE</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L266">266</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="266">&#43;  &#39;bar&#39; -&gt; BAR</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L267">267</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="267"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L268">268</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="268"> state CRITERIA:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L269">269</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="269">   ctype = &#39;class&#39; -&gt; CRITERION</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L270">270</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="270">@@ -319,3 &#43;320,14 @@ state NOP:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L271">271</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="271"> state SCRATCHPAD:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L272">272</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="272">   &#39;show&#39;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L273">273</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="273">       -&gt; call cmd_scratchpad_show()</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L274">274</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="274">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L275">275</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="275">&#43;# bar [&lt;bar_id&gt;] hide|show|forcehide|toggle</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L276">276</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="276">&#43;state BAR:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L277">277</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="277">&#43;  bar_state = &#39;hide&#39;, &#39;show&#39;, &#39;forcehide&#39;, &#39;toggle&#39;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L278">278</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="278">&#43;      -&gt; call cmd_bar(NULL, $bar_state)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L279">279</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="279">&#43;  bar_id = word</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L280">280</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="280">&#43;      -&gt; BAR_W_ID</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L281">281</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="281">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L282">282</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="282">&#43;state BAR_W_ID:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L283">283</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="283">&#43;  bar_state = &#39;hide&#39;, &#39;show&#39;, &#39;forcehide&#39;, &#39;toggle&#39;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L284">284</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="284">&#43;      -&gt; call cmd_bar($bar_id, $bar_state)</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/parser-specs/config.spec</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L289">289</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="289">@@ -349,6 &#43;349,8 @@ state BAR:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L290">290</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="290">   &#39;status_command&#39;    -&gt; BAR_STATUS_COMMAND</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L291">291</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="291">   &#39;socket_path&#39;       -&gt; BAR_SOCKET_PATH</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L292">292</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="292">   &#39;mode&#39;              -&gt; BAR_MODE</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L293">293</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="293">&#43;  &#39;state&#39;             -&gt; BAR_STATE</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L294">294</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="294">&#43;  &#39;id&#39;                -&gt; BAR_ID</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L295">295</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="295">   &#39;modifier&#39;          -&gt; BAR_MODIFIER</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L296">296</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="296">   &#39;position&#39;          -&gt; BAR_POSITION</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L297">297</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="297">   &#39;output&#39;            -&gt; BAR_OUTPUT</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L298">298</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="298">@@ -381,6 &#43;383,14 @@ state BAR_MODE:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L299">299</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="299">   mode = &#39;dock&#39;, &#39;hide&#39;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L300">300</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="300">       -&gt; call cfg_bar_mode($mode); BAR</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L301">301</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="301"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L302">302</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="302">&#43;state BAR_STATE:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L303">303</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="303">&#43;  state = &#39;hide&#39;, &#39;show&#39;, &#39;forcehide&#39;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L304">304</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="304">&#43;      -&gt; call cfg_bar_state($state); BAR</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L305">305</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="305">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L306">306</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="306">&#43;state BAR_ID:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L307">307</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="307">&#43;  bar_id = word</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L308">308</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="308">&#43;      -&gt; call cfg_bar_id($bar_id); BAR</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L309">309</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="309">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L310">310</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="310"> state BAR_MODIFIER:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L311">311</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="311">   modifier = &#39;Mod1&#39;, &#39;Mod2&#39;, &#39;Mod3&#39;, &#39;Mod4&#39;, &#39;Mod5&#39;, &#39;Control&#39;, &#39;Ctrl&#39;, &#39;Shift&#39;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L312">312</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="312">       -&gt; call cfg_bar_modifier($modifier); BAR</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/commands.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L317">317</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="317">@@ -1898,3 &#43;1898,54 @@ void cmd_rename_workspace(I3_CMD, char *old_name, char *new_name) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L318">318</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="318"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L319">319</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="319">     ipc_send_event(&#34;workspace&#34;, I3_IPC_EVENT_WORKSPACE, &#34;{\&#34;change\&#34;:\&#34;rename\&#34;}&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L320">320</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="320"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L321">321</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="321">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L322">322</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="322">&#43;/*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L323">323</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="323">&#43; * Implementation of &#39;bar [&lt;bar_id&gt;] hide|show|forcehide|toggle&#39;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L324">324</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="324">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L325">325</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="325">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L326">326</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="326">&#43;void cmd_bar(I3_CMD, char* bar_id, char *state_str) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L327">327</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="327">&#43;    int state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L328">328</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="328">&#43;    bool toggle = false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L329">329</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="329">&#43;    if (strcmp(state_str, &#34;hide&#34;) == 0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L330">330</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="330">&#43;        state = S_HIDE;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L331">331</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="331">&#43;    else if (strcmp(state_str, &#34;show&#34;) == 0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L332">332</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="332">&#43;        state = S_SHOW;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L333">333</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="333">&#43;    else if (strcmp(state_str, &#34;forcehide&#34;) == 0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L334">334</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="334">&#43;        state = S_FORCEHIDE;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L335">335</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="335">&#43;    else if (strcmp(state_str, &#34;toggle&#34;) == 0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L336">336</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="336">&#43;        toggle = true;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L337">337</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="337">&#43;    else {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L338">338</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="338">&#43;        ELOG(&#34;Unknown bar state \&#34;%s\&#34;, this is a mismatch between code and parser spec.\n&#34;, state_str);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L339">339</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="339">&#43;        return;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L340">340</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="340">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L341">341</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="341">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L342">342</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="342">&#43;    bool changed_state = false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L343">343</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="343">&#43;    Barconfig *current = NULL;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L344">344</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="344">&#43;    TAILQ_FOREACH(current, &amp;barconfigs, configs) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L345">345</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="345">&#43;        if (bar_id &amp;&amp; strcmp(current-&gt;id, bar_id) != 0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L346">346</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="346">&#43;            continue;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L347">347</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="347">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L348">348</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="348">&#43;        if (toggle)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L349">349</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="349">&#43;            state = (current-&gt;state &#43; 1) % 2;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L350">350</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="350">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L351">351</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="351">&#43;        DLOG(&#34;Changing bar state of bar_id %s to %s (%d)\n&#34;, bar_id, state_str, state);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L352">352</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="352">&#43;        current-&gt;state = state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L353">353</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="353">&#43;        changed_state = true;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L354">354</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="354">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L355">355</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="355">&#43;        if (bar_id)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L356">356</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="356">&#43;             break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L357">357</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="357">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L358">358</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="358">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L359">359</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="359">&#43;    if (bar_id &amp;&amp; !changed_state) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L360">360</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="360">&#43;        DLOG(&#34;Changing bar state of bar_id %s failed, bar_id not found.\n&#34;, bar_id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L361">361</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="361">&#43;        ysuccess(false);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L362">362</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="362">&#43;        return;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L363">363</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="363">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L364">364</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="364">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L365">365</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="365">&#43;    ysuccess(true);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L366">366</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="366">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L367">367</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="367">&#43;    if (bar_id)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L368">368</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="368">&#43;        update_barconfig_state(bar_id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L369">369</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="369">&#43;    else</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L370">370</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="370">&#43;        update_barconfig_state_all();</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L371">371</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="371">&#43;}</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/config.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L376">376</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="376">@@ -211,6 &#43;211,71 @@ void switch_mode(const char *new_mode) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L377">377</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="377"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L378">378</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="378"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L379">379</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="379"> /*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L380">380</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="380">&#43; * Sends a bar state update to a specific barconfig listener</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L381">381</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="381">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L382">382</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="382">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L383">383</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="383">&#43;void update_barconfig_state_on_config(Barconfig* config) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L384">384</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="384">&#43;    /* Build json message */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L385">385</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="385">&#43;    char *state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L386">386</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="386">&#43;    switch (config-&gt;state) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L387">387</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="387">&#43;        case S_SHOW:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L388">388</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="388">&#43;            state =&#34;show&#34;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L389">389</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="389">&#43;            break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L390">390</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="390">&#43;        case S_FORCEHIDE:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L391">391</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="391">&#43;            state =&#34;forcehide&#34;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L392">392</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="392">&#43;            break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L393">393</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="393">&#43;        case S_HIDE:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L394">394</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="394">&#43;        default:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L395">395</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="395">&#43;            state = &#34;hide&#34;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L396">396</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="396">&#43;            break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L397">397</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="397">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L398">398</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="398">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L399">399</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="399">&#43;    char *event_msg;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L400">400</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="400">&#43;    sasprintf(&amp;event_msg, &#34;{\&#34;state\&#34;:\&#34;%s\&#34;}&#34;, state);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L401">401</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="401">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L402">402</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="402">&#43;    /* Send event to the bar with the specified bar_id */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L403">403</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="403">&#43;    char *event_id;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L404">404</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="404">&#43;    sasprintf(&amp;event_id, &#34;barconfig_update_%s&#34;, config-&gt;id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L405">405</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="405">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L406">406</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="406">&#43;    ipc_send_event(event_id, I3_IPC_EVENT_BARCONFIG_UPDATE, event_msg);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L407">407</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="407">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L408">408</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="408">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L409">409</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="409">&#43;/*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L410">410</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="410">&#43; * Sends a bar state update to the barconfig listener with the corresponding bar_id</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L411">411</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="411">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L412">412</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="412">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L413">413</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="413">&#43;void update_barconfig_state(char* bar_id) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L414">414</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="414">&#43;    /* Get the corresponding barconfig */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L415">415</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="415">&#43;    Barconfig *current, *config;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L416">416</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="416">&#43;    TAILQ_FOREACH(current, &amp;barconfigs, configs) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L417">417</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="417">&#43;        if (strcmp(current-&gt;id, bar_id) != 0)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L418">418</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="418">&#43;            continue;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L419">419</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="419">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L420">420</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="420">&#43;        config = current;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L421">421</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="421">&#43;        break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L422">422</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="422">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L423">423</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="423">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L424">424</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="424">&#43;    if (!config) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L425">425</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="425">&#43;        /* We could not find a barconfig for the specified bar_id */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L426">426</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="426">&#43;        DLOG(&#34;Sending bar state update failed, specified bar_id %s not found.\n&#34;, bar_id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L427">427</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="427">&#43;        return;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L428">428</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="428">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L429">429</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="429">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L430">430</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="430">&#43;    update_barconfig_state_on_config(config);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L431">431</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="431">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L432">432</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="432">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L433">433</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="433">&#43;/*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L434">434</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="434">&#43; * Sends a bar state update to all barconfig listeners</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L435">435</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="435">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L436">436</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="436">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L437">437</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="437">&#43;void update_barconfig_state_all() {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L438">438</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="438">&#43;    Barconfig *current;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L439">439</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="439">&#43;    TAILQ_FOREACH(current, &amp;barconfigs, configs) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L440">440</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="440">&#43;        update_barconfig_state_on_config(current);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L441">441</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="441">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L442">442</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="442">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L443">443</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="443">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L444">444</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="444">&#43;/*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L445">445</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="445">  * Get the path of the first configuration file found. If override_configpath</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L446">446</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="446">  * is specified, that path is returned and saved for further calls. Otherwise,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L447">447</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="447">  * checks the home directory first, then the system directory first, always</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/config_directives.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L452">452</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="452">@@ -455,6 &#43;455,14 @@ CFGFUN(bar_mode, const char *mode) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L453">453</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="453">     current_bar.mode = (strcmp(mode, &#34;hide&#34;) == 0 ? M_HIDE : M_DOCK);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L454">454</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="454"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L455">455</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="455"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L456">456</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="456">&#43;CFGFUN(bar_state, const char *state) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L457">457</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="457">&#43;    current_bar.state = (strcmp(state, &#34;hide&#34;) == 0 ? S_HIDE : (strcmp(state, &#34;show&#34;) == 0 ? S_SHOW : S_FORCEHIDE));</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L458">458</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="458">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L459">459</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="459">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L460">460</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="460">&#43;CFGFUN(bar_id, const char *bar_id) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L461">461</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="461">&#43;    current_bar.id = sstrdup(bar_id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L462">462</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="462">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L463">463</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="463">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L464">464</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="464"> CFGFUN(bar_output, const char *output) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L465">465</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="465">     int new_outputs = current_bar.num_outputs &#43; 1;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L466">466</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="466">     current_bar.outputs = srealloc(current_bar.outputs, sizeof(char*) * new_outputs);</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L467">467</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="467">@@ -548,16 &#43;556,15 @@ CFGFUN(bar_workspace_buttons, const char *value) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L468">468</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="468"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L469">469</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="469"> CFGFUN(bar_finish) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L470">470</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="470">     DLOG(&#34;\t new bar configuration finished, saving.\n&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L471">471</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="471">-    /* Generate a unique ID for this bar */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L472">472</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="472">-    current_bar.id = sstrdup(&#34;bar-XXXXXX&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L473">473</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="473">-    /* This works similar to mktemp in that it replaces the last six X with</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L474">474</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="474">-     * random letters, but without the restriction that the given buffer</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L475">475</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="475">-     * has to contain a valid path name. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L476">476</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="476">-    char *x = current_bar.id &#43; strlen(&#34;bar-&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L477">477</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="477">-    while (*x != &#39;\0&#39;) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L478">478</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="478">-        *(x&#43;&#43;) = (rand() % 26) &#43; &#39;a&#39;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L479">479</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="479">&#43;    /* Generate a unique ID for this bar if not already configured */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L480">480</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="480">&#43;    if (!current_bar.id) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L481">481</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="481">&#43;        char* buf;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L482">482</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="482">&#43;        sasprintf(&amp;buf, &#34;bar-%d&#34;, config.number_barconfigs);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L483">483</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="483">&#43;        current_bar.id = sstrdup(buf);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L484">484</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="484">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L485">485</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="485"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L486">486</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="486">&#43;    config.number_barconfigs&#43;&#43;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L487">487</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="487">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L488">488</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="488">     /* If no font was explicitly set, we use the i3 font as default */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L489">489</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="489">     if (!current_bar.font &amp;&amp; font_pattern)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L490">490</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="490">         current_bar.font = sstrdup(font_pattern);</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/ipc.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L495">495</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="495">@@ -625,6 &#43;625,20 @@ IPC_HANDLER(get_bar_config) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L496">496</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="496">             ystr(&#34;hide&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L497">497</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="497">         else ystr(&#34;dock&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L498">498</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="498"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L499">499</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="499">&#43;        ystr(&#34;state&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L500">500</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="500">&#43;        switch (config-&gt;state) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L501">501</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="501">&#43;            case S_SHOW:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L502">502</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="502">&#43;                ystr(&#34;show&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L503">503</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="503">&#43;                break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L504">504</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="504">&#43;            case S_FORCEHIDE:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L505">505</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="505">&#43;                ystr(&#34;forcehide&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L506">506</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="506">&#43;                break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L507">507</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="507">&#43;            case S_HIDE:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L508">508</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="508">&#43;            default:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L509">509</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="509">&#43;                ystr(&#34;hide&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L510">510</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="510">&#43;                break;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L511">511</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="511">&#43;        }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L512">512</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="512">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L513">513</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="513">         ystr(&#34;modifier&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L514">514</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="514">         switch (config-&gt;modifier) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L515">515</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="515">             case M_CONTROL:</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L516">516</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="516">@@ -710,6 &#43;724,8 @@ IPC_HANDLER(get_bar_config) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L517">517</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="517">     y(free);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L518">518</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="518"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L519">519</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="519"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L520">520</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="520">&#43;#undef YSTR_WRITE_STATE</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L521">521</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="521">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L522">522</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="522"> /*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L523">523</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="523">  * Callback for the YAJL parser (will be called when a string is parsed).</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L524">524</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="524">  *</pre>
  </td>
  </tr>


</table>
</div>


</div>

  </body>
</html>

