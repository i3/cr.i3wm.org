
<!DOCTYPE html>
<html>
  <head>
    <title>i3 Patch: Maintain the _NET_CLIENT_LIST property</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" media="screen" href="http://i3wm.org/css/style.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/public/stylesheets/main.css">
    <link rel="shortcut icon" type="image/png" href="http://i3wm.org/favicon.png">
    <script src="/public/js/jquery-1.9.0.min.js" type="text/javascript" charset="utf-8"></script>
	<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
    
    
      <script src="/public/js/patch.js" type="text/javascript" charset="utf-8"></script>
    
  </head>
  <body>


<div id="main">
	<a href="/"><h1 id="title">i3 - improved tiling WM</h1></a>
				<ul id="nav">
						<li><a style="border-bottom: 2px solid #fff" href="/">Reviews</a></li>
						<li><a href="http://bugs.i3wm.org/">Bugs</a></li>
				</ul>
<br style="clear: both">

<div id="content">

<h1>Maintain the _NET_CLIENT_LIST property</h1>
<div style="float: right">
<p>
Patch status: merged
</p>
<p>
Patch by Tony Crisci
</p>
</div>

<p>
<strong>Long description</strong>:<br>
<pre>Add and update the _NET_CLIENT_LIST property on the root window to
better comply with ewmh standards.

Information on this property can be found here:
http://standards.freedesktop.org/wm-spec/latest/ar01s03.html

&gt; These arrays contain all X Windows managed by the Window Manager.
&gt; _NET_CLIENT_LIST has initial mapping order, starting with the oldest window.

fixes #1099
</pre>
</p>


<p>
To apply this patch, use:<br>
<code>curl http://cr.i3wm.org/patch/502/raw.patch | git am</code>
</p>




<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/atoms.xmacro</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L28">28</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="28">@@ -13,6 &#43;13,7 @@ xmacro(_NET_WM_WINDOW_TYPE_TOOLBAR)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L29">29</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="29"> xmacro(_NET_WM_WINDOW_TYPE_SPLASH)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L30">30</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="30"> xmacro(_NET_WM_DESKTOP)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L31">31</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="31"> xmacro(_NET_WM_STRUT_PARTIAL)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L32">32</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="32">&#43;xmacro(_NET_CLIENT_LIST)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L33">33</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="33"> xmacro(_NET_CLIENT_LIST_STACKING)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L34">34</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="34"> xmacro(_NET_CURRENT_DESKTOP)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L35">35</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="35"> xmacro(_NET_ACTIVE_WINDOW)</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/include/ewmh.h</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L40">40</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="40">@@ -28,6 &#43;28,11 @@ void ewmh_update_current_desktop(void);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L41">41</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="41"> void ewmh_update_active_window(xcb_window_t window);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L42">42</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="42"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L43">43</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="43"> /**</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L44">44</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="44">&#43; * Updates the _NET_CLIENT_LIST hint. Used for window listers.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L45">45</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="45">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L46">46</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="46">&#43;void ewmh_update_client_list(xcb_window_t *list, int num_windows);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L47">47</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="47">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L48">48</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="48">&#43;/**</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L49">49</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="49">  * Updates the _NET_CLIENT_LIST_STACKING hint. Necessary to move tabs in</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L50">50</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="50">  * Chromium correctly.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L51">51</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="51">  *</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/ewmh.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L56">56</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="56">@@ -72,6 &#43;72,22 @@ void ewmh_update_workarea(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L57">57</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="57"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L58">58</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="58"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L59">59</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="59"> /*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L60">60</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="60">&#43; * Updates the _NET_CLIENT_LIST hint.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L61">61</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="61">&#43; *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L62">62</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="62">&#43; */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L63">63</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="63">&#43;void ewmh_update_client_list(xcb_window_t *list, int num_windows) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L64">64</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="64">&#43;    xcb_change_property(</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L65">65</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="65">&#43;        conn,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L66">66</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="66">&#43;        XCB_PROP_MODE_REPLACE,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L67">67</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="67">&#43;        root,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L68">68</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="68">&#43;        A__NET_CLIENT_LIST,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L69">69</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="69">&#43;        XCB_ATOM_WINDOW,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L70">70</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="70">&#43;        32,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L71">71</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="71">&#43;        num_windows,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L72">72</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="72">&#43;        list);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L73">73</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="73">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L74">74</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="74">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L75">75</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="75">&#43;/*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L76">76</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="76">  * Updates the _NET_CLIENT_LIST_STACKING hint.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L77">77</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="77">  *</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L78">78</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="78">  */</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L79">79</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="79">@@ -122,5 &#43;138,5 @@ void ewmh_setup_hints(void) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L80">80</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="80">     /* I’m not entirely sure if we need to keep _NET_WM_NAME on root. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L81">81</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="81">     xcb_change_property(conn, XCB_PROP_MODE_REPLACE, root, A__NET_WM_NAME, A_UTF8_STRING, 8, strlen(&#34;i3&#34;), &#34;i3&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L82">82</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="82"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L83">83</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="83">-    xcb_change_property(conn, XCB_PROP_MODE_REPLACE, root, A__NET_SUPPORTED, XCB_ATOM_ATOM, 32, 18, supported_atoms);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L84">84</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="84">&#43;    xcb_change_property(conn, XCB_PROP_MODE_REPLACE, root, A__NET_SUPPORTED, XCB_ATOM_ATOM, 32, 19, supported_atoms);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L85">85</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="85"> }</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/src/x.c</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L90">90</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="90">@@ -20,11 &#43;20,6 @@ xcb_window_t focused_id = XCB_NONE;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L91">91</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="91">  * tell whether the focused window actually changed. */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L92">92</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="92"> static xcb_window_t last_focused = XCB_NONE;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L93">93</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="93"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L94">94</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="94">-/* The bottom-to-top window stack of all windows which are managed by i3.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L95">95</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="95">- * Used for x_get_window_stack(). */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L96">96</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="96">-static xcb_window_t *btt_stack;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L97">97</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="97">-static int btt_stack_num;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L98">98</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="98">-</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L99">99</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="99"> /* Stores coordinates to warp mouse pointer to if set */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L100">100</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="100"> static Rect *warp_to;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L101">101</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="101"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L102">102</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="102">@@ -60,6 &#43;55,7 @@ typedef struct con_state {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L103">103</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="103"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L104">104</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="104">     CIRCLEQ_ENTRY(con_state) state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L105">105</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="105">     CIRCLEQ_ENTRY(con_state) old_state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L106">106</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="106">&#43;    TAILQ_ENTRY(con_state) initial_mapping_order;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L107">107</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="107"> } con_state;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L108">108</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="108"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L109">109</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="109"> CIRCLEQ_HEAD(state_head, con_state) state_head =</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L110">110</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="110">@@ -68,6 &#43;64,9 @@ CIRCLEQ_HEAD(state_head, con_state) state_head =</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L111">111</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="111"> CIRCLEQ_HEAD(old_state_head, con_state) old_state_head =</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L112">112</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="112">     CIRCLEQ_HEAD_INITIALIZER(old_state_head);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L113">113</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="113"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L114">114</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="114">&#43;TAILQ_HEAD(initial_mapping_head, con_state) initial_mapping_head =</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L115">115</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="115">&#43;    TAILQ_HEAD_INITIALIZER(initial_mapping_head);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L116">116</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="116">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L117">117</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="117"> /*</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L118">118</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="118">  * Returns the container state for the given frame. This function always</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L119">119</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="119">  * returns a container state (otherwise, there is a bug in the code and the</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L120">120</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="120">@@ -151,8 &#43;150,10 @@ void x_con_init(Con *con, uint16_t depth) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L121">121</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="121">     state-&gt;id = con-&gt;frame;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L122">122</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="122">     state-&gt;mapped = false;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L123">123</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="123">     state-&gt;initial = true;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L124">124</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="124">&#43;    DLOG(&#34;Adding window 0x%08x to lists\n&#34;, state-&gt;id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L125">125</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="125">     CIRCLEQ_INSERT_HEAD(&amp;state_head, state, state);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L126">126</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="126">     CIRCLEQ_INSERT_HEAD(&amp;old_state_head, state, old_state);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L127">127</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="127">&#43;    TAILQ_INSERT_TAIL(&amp;initial_mapping_head, state, initial_mapping_order);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L128">128</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="128">     DLOG(&#34;adding new state for window id 0x%08x\n&#34;, state-&gt;id);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L129">129</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="129"> }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L130">130</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="130"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L131">131</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="131">@@ -233,6 &#43;234,7 @@ void x_con_kill(Con *con) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L132">132</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="132">     state = state_for_frame(con-&gt;frame);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L133">133</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="133">     CIRCLEQ_REMOVE(&amp;state_head, state, state);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L134">134</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="134">     CIRCLEQ_REMOVE(&amp;old_state_head, state, old_state);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L135">135</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="135">&#43;    TAILQ_REMOVE(&amp;initial_mapping_head, state, initial_mapping_order);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L136">136</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="136">     FREE(state-&gt;name);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L137">137</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="137">     free(state);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L138">138</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="138"> </pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L139">139</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="139">@@ -909,12 &#43;911,17 @@ void x_push_changes(Con *con) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L140">140</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="140">         if (state-&gt;con &amp;&amp; state-&gt;con-&gt;window)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L141">141</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="141">             cnt&#43;&#43;;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L142">142</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="142"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L143">143</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="143">-    if (cnt != btt_stack_num) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L144">144</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="144">-        btt_stack = srealloc(btt_stack, sizeof(xcb_window_t) * cnt);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L145">145</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="145">-        btt_stack_num = cnt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L146">146</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="146">&#43;    /* The bottom-to-top window stack of all windows which are managed by i3.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L147">147</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="147">&#43;     * Used for x_get_window_stack(). */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L148">148</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="148">&#43;    static xcb_window_t *client_list_windows = NULL;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L149">149</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="149">&#43;    static int client_list_count = 0;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L150">150</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="150">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L151">151</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="151">&#43;    if (cnt != client_list_count) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L152">152</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="152">&#43;        client_list_windows = srealloc(client_list_windows, sizeof(xcb_window_t) * cnt);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L153">153</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="153">&#43;        client_list_count = cnt;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L154">154</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="154">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L155">155</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="155"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L156">156</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="156">-    xcb_window_t *walk = btt_stack;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L157">157</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="157">&#43;    xcb_window_t *walk = client_list_windows;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L158">158</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="158"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L159">159</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="159">     /* X11 correctly represents the stack if we push it from bottom to top */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L160">160</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="160">     CIRCLEQ_FOREACH_REVERSE(state, &amp;state_head, state) {</pre>
  </td>
  </tr>



  <tr class="linerow">
  <td class="line-number" id="L161">161</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="161">@@ -940,9 &#43;947,21 @@ void x_push_changes(Con *con) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L162">162</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="162">     }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L163">163</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="163"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L164">164</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="164">     /* If we re-stacked something (or a new window appeared), we need to update</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L165">165</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="165">-     * the _NET_CLIENT_LIST_STACKING hint */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L166">166</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="166">-    if (stacking_changed)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L167">167</td>
  <td width="100%" class="line del">
	  <b class="add-bubble"></b>
	  <pre data-nr="167">-        ewmh_update_client_list_stacking(btt_stack, btt_stack_num);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L168">168</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="168">&#43;     * the _NET_CLIENT_LIST and _NET_CLIENT_LIST_STACKING hints */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L169">169</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="169">&#43;    if (stacking_changed) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L170">170</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="170">&#43;        DLOG(&#34;Client list changed (%i clients)\n&#34;, cnt);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L171">171</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="171">&#43;        ewmh_update_client_list_stacking(client_list_windows, client_list_count);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L172">172</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="172">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L173">173</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="173">&#43;        walk = client_list_windows;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L174">174</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="174">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L175">175</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="175">&#43;        /* reorder by initial mapping */</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L176">176</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="176">&#43;        TAILQ_FOREACH(state, &amp;initial_mapping_head, initial_mapping_order) {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L177">177</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="177">&#43;            if (state-&gt;con &amp;&amp; state-&gt;con-&gt;window)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L178">178</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="178">&#43;                *walk&#43;&#43; = state-&gt;con-&gt;window-&gt;id;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L179">179</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="179">&#43;        }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L180">180</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="180">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L181">181</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="181">&#43;        ewmh_update_client_list(client_list_windows, client_list_count);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L182">182</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="182">&#43;    }</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L183">183</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="183"> </pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L184">184</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="184">     DLOG(&#34;PUSHING CHANGES\n&#34;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L185">185</td>
  <td width="100%" class="line ">
	  <b class="add-bubble"></b>
	  <pre data-nr="185">     x_push_node(con);</pre>
  </td>
  </tr>


</table>
</div>

<div style="border: 1px solid #ccc; margin: 1em; width: 880px; overflow-x: auto; background-color: #eaeaea; color: #000;">
<h2 style="margin: 0; padding: .5em; color: #000;">b/testcases/t/223-net-client-list.t</h2>
<table class="patch" cellpadding="0" cellspacing="0">


  <tr class="linerow">
  <td class="line-number" id="L191">191</td>
  <td width="100%" class="line hunk">
	  <b class="add-bubble"></b>
	  <pre data-nr="191">@@ -0,0 &#43;1,99 @@</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L192">192</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="192">&#43;#!perl</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L193">193</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="193">&#43;# vim:ts=4:sw=4:expandtab</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L194">194</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="194">&#43;#</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L195">195</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="195">&#43;# Please read the following documents before working on tests:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L196">196</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="196">&#43;# • http://build.i3wm.org/docs/testsuite.html</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L197">197</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="197">&#43;#   (or docs/testsuite)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L198">198</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="198">&#43;#</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L199">199</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="199">&#43;# • http://build.i3wm.org/docs/lib-i3test.html</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L200">200</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="200">&#43;#   (alternatively: perldoc ./testcases/lib/i3test.pm)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L201">201</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="201">&#43;#</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L202">202</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="202">&#43;# • http://build.i3wm.org/docs/ipc.html</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L203">203</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="203">&#43;#   (or docs/ipc)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L204">204</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="204">&#43;#</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L205">205</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="205">&#43;# • http://onyxneon.com/books/modern_perl/modern_perl_a4.pdf</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L206">206</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="206">&#43;#   (unless you are already familiar with Perl)</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L207">207</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="207">&#43;#</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L208">208</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="208">&#43;# Test that _NET_CLIENT_LIST is properly updated on the root window as windows</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L209">209</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="209">&#43;# are mapped and unmapped.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L210">210</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="210">&#43;#</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L211">211</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="211">&#43;# Information on this property can be found here:</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L212">212</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="212">&#43;# http://standards.freedesktop.org/wm-spec/latest/ar01s03.html</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L213">213</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="213">&#43;#</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L214">214</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="214">&#43;# &gt; These arrays contain all X Windows managed by the Window Manager.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L215">215</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="215">&#43;# &gt; _NET_CLIENT_LIST has initial mapping order, starting with the oldest window.</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L216">216</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="216">&#43;#</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L217">217</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="217">&#43;# Ticket: #1099</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L218">218</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="218">&#43;# Bug still in: 4.7.2-8-ge6cce92</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L219">219</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="219">&#43;use i3test;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L220">220</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="220">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L221">221</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="221">&#43;sub get_client_list {</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L222">222</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="222">&#43;    my $cookie = $x-&gt;get_property(</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L223">223</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="223">&#43;        0,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L224">224</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="224">&#43;        $x-&gt;get_root_window(),</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L225">225</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="225">&#43;        $x-&gt;atom(name =&gt; &#39;_NET_CLIENT_LIST&#39;)-&gt;id,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L226">226</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="226">&#43;        $x-&gt;atom(name =&gt; &#39;WINDOW&#39;)-&gt;id,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L227">227</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="227">&#43;        0,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L228">228</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="228">&#43;        4096,</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L229">229</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="229">&#43;    );</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L230">230</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="230">&#43;    my $reply = $x-&gt;get_property_reply($cookie-&gt;{sequence});</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L231">231</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="231">&#43;    my $len = $reply-&gt;{length};</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L232">232</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="232">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L233">233</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="233">&#43;    return () if $len == 0;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L234">234</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="234">&#43;    return unpack(&#34;L$len&#34;, $reply-&gt;{value});</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L235">235</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="235">&#43;}</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L236">236</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="236">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L237">237</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="237">&#43;# Mapping a window should give us one client in _NET_CLIENT_LIST</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L238">238</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="238">&#43;my $win1 = open_window;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L239">239</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="239">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L240">240</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="240">&#43;my @clients = get_client_list;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L241">241</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="241">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L242">242</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="242">&#43;is(@clients, 1, &#39;One client in _NET_CLIENT_LIST&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L243">243</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="243">&#43;is($clients[0], $win1-&gt;{id}, &#39;Correct client in position one&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L244">244</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="244">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L245">245</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="245">&#43;# Mapping another window should give us two clients in the list with the last</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L246">246</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="246">&#43;# client mapped in the last position</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L247">247</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="247">&#43;my $win2 = open_window;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L248">248</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="248">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L249">249</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="249">&#43;@clients = get_client_list;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L250">250</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="250">&#43;is(@clients, 2, &#39;Added mapped client to list (2)&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L251">251</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="251">&#43;is($clients[0], $win1-&gt;{id}, &#39;Correct client in position one&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L252">252</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="252">&#43;is($clients[1], $win2-&gt;{id}, &#39;Correct client in position two&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L253">253</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="253">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L254">254</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="254">&#43;# Mapping another window should give us three clients in the list in the order</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L255">255</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="255">&#43;# they were mapped</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L256">256</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="256">&#43;my $win3 = open_window;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L257">257</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="257">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L258">258</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="258">&#43;@clients = get_client_list;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L259">259</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="259">&#43;is(@clients, 3, &#39;Added mapped client to list (3)&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L260">260</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="260">&#43;is($clients[0], $win1-&gt;{id}, &#39;Correct client in position one&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L261">261</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="261">&#43;is($clients[1], $win2-&gt;{id}, &#39;Correct client in position two&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L262">262</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="262">&#43;is($clients[2], $win3-&gt;{id}, &#39;Correct client in position three&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L263">263</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="263">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L264">264</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="264">&#43;# Unmapping the second window should give us the two remaining clients in the</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L265">265</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="265">&#43;# order they were mapped</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L266">266</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="266">&#43;$win2-&gt;unmap;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L267">267</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="267">&#43;wait_for_unmap($win2);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L268">268</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="268">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L269">269</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="269">&#43;@clients = get_client_list;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L270">270</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="270">&#43;is(@clients, 2, &#39;Removed unmapped client from list (2)&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L271">271</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="271">&#43;is($clients[0], $win1-&gt;{id}, &#39;Correct client in position one&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L272">272</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="272">&#43;is($clients[1], $win3-&gt;{id}, &#39;Correct client in position two&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L273">273</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="273">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L274">274</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="274">&#43;# Unmapping the first window should give us only the remaining mapped window in</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L275">275</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="275">&#43;# the list</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L276">276</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="276">&#43;$win1-&gt;unmap;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L277">277</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="277">&#43;wait_for_unmap($win1);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L278">278</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="278">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L279">279</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="279">&#43;@clients = get_client_list;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L280">280</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="280">&#43;is(@clients, 1, &#39;Removed unmapped client from list (1)&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L281">281</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="281">&#43;is($clients[0], $win3-&gt;{id}, &#39;Correct client in position one&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L282">282</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="282">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L283">283</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="283">&#43;# Unmapping the last window should give us an empty list</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L284">284</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="284">&#43;$win3-&gt;unmap;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L285">285</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="285">&#43;wait_for_unmap($win3);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L286">286</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="286">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L287">287</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="287">&#43;@clients = get_client_list;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L288">288</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="288">&#43;is(@clients, 0, &#39;Removed unmapped client from list (0)&#39;);</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L289">289</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="289">&#43;</pre>
  </td>
  </tr>

  <tr class="linerow">
  <td class="line-number" id="L290">290</td>
  <td width="100%" class="line add">
	  <b class="add-bubble"></b>
	  <pre data-nr="290">&#43;done_testing;</pre>
  </td>
  </tr>


</table>
</div>


</div>

  </body>
</html>

